<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no"
    />
    <meta name="theme-color" content="#667eea" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="format-detection" content="telephone=no" />
    <meta
      name="description"
      content="Build and embed professional web widgets for your website. Contact forms, pricing tables, calculators, and more - all customizable and ready to deploy."
    />
    <meta
      name="keywords"
      content="web widgets, embeddable tools, contact form builder, pricing table, calculator widget, web tools, iowidgets, widget generator, button maker, badge creator, qr code generator, password checker, typing test, countdown timer, pomodoro timer, unit converter, color converter, testimonial widget"
    />
    <meta name="author" content="iowidgets" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />
    <meta name="revisit-after" content="7 days" />
    <link rel="canonical" href="https://iowidgets.com/" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://iowidgets.com/" />
    <meta
      property="og:title"
      content="iowidgets - Professional Web Widget Builder"
    />
    <meta
      property="og:description"
      content="Create customizable, embeddable web widgets for your website. Build contact forms, pricing tables, calculators, and more in minutes. Free to use for personal and commercial projects."
    />
    <meta
      property="og:image"
      content="https://iowidgets.com/assets/og-image.png"
    />
    <meta property="og:site_name" content="iowidgets" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://iowidgets.com/" />
    <meta
      name="twitter:title"
      content="iowidgets - Professional Web Widget Builder"
    />
    <meta
      name="twitter:description"
      content="Create customizable, embeddable web widgets for your website. Build contact forms, pricing tables, calculators, and more in minutes."
    />
    <meta
      name="twitter:image"
      content="https://iowidgets.com/assets/og-image.png"
    />

    <!-- Additional SEO -->
    <meta name="rating" content="general" />
    <meta name="distribution" content="global" />
    <meta name="coverage" content="Worldwide" />
    <meta name="target" content="all" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />

    <title>
      iowidgets - Build Embeddable Web Widgets | Free Widget Generator & Tools
    </title>

    <!-- Google AdSense -->
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2456627863532019"
      crossorigin="anonymous"
    ></script>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-S15806B1HW"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-S15806B1HW");
    </script>

    <!-- Structured Data / JSON-LD -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "iowidgets",
        "url": "https://iowidgets.com",
        "description": "Create customizable, embeddable web widgets for your website. Build contact forms, pricing tables, calculators, and more in minutes.",
        "applicationCategory": "DeveloperApplication",
        "operatingSystem": "Any",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "featureList": [
          "Contact Form Builder",
          "Pricing Table Generator",
          "Calculator Widget",
          "Button Generator",
          "Badge Maker",
          "QR Code Generator",
          "Password Strength Checker",
          "Text Counter",
          "Unit Converter",
          "Color Converter",
          "Countdown Timer",
          "Pomodoro Timer",
          "Stopwatch",
          "Typing Speed Test",
          "Reaction Time Test"
        ],
        "author": {
          "@type": "Organization",
          "name": "iowidgets",
          "url": "https://iowidgets.com"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "ratingCount": "156"
        }
      }
    </script>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "iowidgets",
        "url": "https://iowidgets.com",
        "logo": "https://iowidgets.com/assets/logo.png",
        "sameAs": [],
        "contactPoint": {
          "@type": "ContactPoint",
          "email": "hello@iowidgets.com",
          "contactType": "Customer Service"
        }
      }
    </script>

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json" />
    <link
      rel="apple-touch-icon"
      href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkMSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6IzRBOTBFMjtzdG9wLW9wYWNpdHk6MSIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM2MzY2RjE7c3RvcC1vcGFjaXR5OjEiIC8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3Qgd2lkdGg9IjE4MCIgaGVpZ2h0PSIxODAiIHJ4PSIzNiIgZmlsbD0idXJsKCNncmFkMSkiLz48Y2lyY2xlIGN4PSI2MCIgY3k9IjYwIiByPSIyMCIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuOSIvPjxjaXJjbGUgY3g9IjEyMCIgY3k9IjYwIiByPSIyMCIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuOSIvPjxjaXJjbGUgY3g9IjYwIiBjeT0iMTIwIiByPSIyMCIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuOSIvPjxjaXJjbGUgY3g9IjEyMCIgY3k9IjEyMCIgcj0iMjAiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjkiLz48L3N2Zz4="
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* Prevent layout shifts and ensure smooth rendering */
      html,
      body {
        height: 100%;
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        /* Improve scrolling on mobile */
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: none;
      }

      body {
        font-family: "SF Pro Display", -apple-system, BlinkMacSystemFont,
          "Segoe UI", Roboto, sans-serif;
        /* Work Mode - Professional & Focused */
        background: linear-gradient(
          135deg,
          #1e3a8a 0%,
          #3730a3 25%,
          #6366f1 50%,
          #8b5cf6 75%,
          #a855f7 100%
        );
        background-size: 400% 400%;
        animation: workGradient 15s ease infinite;
        min-height: 100vh;
        overflow-x: hidden;
        color: #fff;
        position: relative;
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        font-weight: 300;
        letter-spacing: -0.01em;
      }

      body.fun-mode {
        /* Fun Mode - Vibrant & Playful */
        background: linear-gradient(
          135deg,
          #ec4899 0%,
          #f97316 25%,
          #eab308 50%,
          #22c55e 75%,
          #06b6d4 100%
        );
        background-size: 400% 400%;
        animation: funGradient 12s ease infinite;
      }

      body.learn-mode {
        /* Learn Mode - Calm & Focused */
        background: linear-gradient(
          135deg,
          #6366f1 0%,
          #8b5cf6 25%,
          #06b6d4 50%,
          #10b981 75%,
          #3b82f6 100%
        );
        background-size: 300% 300%;
        animation: learnGradient 15s ease infinite;
      }

      @keyframes workGradient {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }

      @keyframes funGradient {
        0%,
        100% {
          background-position: 0% 50%;
        }
        33% {
          background-position: 100% 0%;
        }
        66% {
          background-position: 0% 100%;
        }
      }

      @keyframes learnGradient {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }

      /* Multiple fallback layers to prevent black screens */
      html {
        background-color: #667eea;
      }

      body::after {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        z-index: -1;
        pointer-events: none;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            circle at 20% 50%,
            rgba(255, 255, 255, 0.02) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(255, 255, 255, 0.02) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 80%,
            rgba(255, 255, 255, 0.02) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: 1;
        opacity: 0.7;
      }

      body.fun-mode::before {
        background: radial-gradient(
            circle at 30% 30%,
            rgba(255, 255, 255, 0.08) 0%,
            transparent 60%
          ),
          radial-gradient(
            circle at 70% 70%,
            rgba(255, 255, 255, 0.06) 0%,
            transparent 60%
          ),
          radial-gradient(
            circle at 50% 90%,
            rgba(255, 255, 255, 0.04) 0%,
            transparent 50%
          );
        opacity: 0.8;
      }

      /* Subtle notification styling */
      .notification {
        position: fixed;
        top: 2rem;
        right: 50%;
        transform: translateX(50%) translateY(-100px);
        padding: 0.75rem 1.5rem;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 400;
        z-index: 10000;
        transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        max-width: 300px;
        text-align: center;
        opacity: 0;
      }

      .notification.show {
        transform: translateX(50%) translateY(0);
        opacity: 1;
      }

      .notification.error {
        background: rgba(239, 68, 68, 0.9);
        border-color: rgba(239, 68, 68, 0.3);
      }

      .notification.success {
        background: rgba(34, 197, 94, 0.9);
        border-color: rgba(34, 197, 94, 0.3);
      }

      /* Elegant Mode Toggle */
      .mode-toggle-container {
        position: fixed;
        top: 2rem;
        right: 2rem;
        z-index: 1000;
        display: flex;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border-radius: 50px;
        padding: 4px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
      }

      @media (max-width: 768px) {
        .mode-toggle-container {
          position: relative;
          top: auto;
          right: auto;
          margin: 0 auto 1rem;
          max-width: 90%;
        }
      }

      .mode-toggle {
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.85rem;
        font-weight: 500;
        letter-spacing: 0.025em;
        text-transform: uppercase;
        border: none;
        background: none;
        color: rgba(255, 255, 255, 0.6);
        user-select: none;
        position: relative;
        overflow: hidden;
      }

      .mode-toggle.active {
        background: rgba(255, 255, 255, 0.2);
        color: #ffffff;
        transform: scale(1.02);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .mode-toggle:hover:not(.active) {
        color: rgba(255, 255, 255, 0.8);
        background: rgba(255, 255, 255, 0.05);
      }

      .mode-toggle::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        transition: left 0.5s;
      }

      .mode-toggle:hover::before {
        left: 100%;
      }

      .corner-icon {
        font-size: 2rem;
        margin-bottom: 0.5rem;
      }

      .corner-label {
        font-size: 0.8rem;
        opacity: 0.9;
      }

      /* Elegant floating animation for widgets */
      @keyframes gentleFloat {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-3px);
        }
      }

      /* Smooth entrance animation */
      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(20px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .header {
        text-align: center;
        padding: 4rem 2rem 2rem;
        position: relative;
        z-index: 10;
        max-width: 800px;
        margin: 0 auto;
      }

      .header h1 {
        font-size: clamp(2.5rem, 8vw, 4rem);
        font-weight: 200;
        margin-bottom: 1rem;
        letter-spacing: -0.02em;
        background: linear-gradient(
          135deg,
          #ffffff 0%,
          rgba(255, 255, 255, 0.8) 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        position: relative;
      }

      .header h1::after {
        content: "";
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 60px;
        height: 2px;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.5),
          transparent
        );
        border-radius: 2px;
      }

      .header p {
        font-size: 1.1rem;
        opacity: 0.75;
        font-weight: 300;
        margin-bottom: 0.5rem;
        letter-spacing: 0.01em;
      }

      .header .subtitle {
        font-size: 0.9rem;
        opacity: 0.6;
        font-weight: 400;
        margin-bottom: 2rem;
        font-style: italic;
      }

      /* Favorites Toggle - Subtle and Elegant */
      .favorites-toggle {
        position: fixed;
        top: 2rem;
        left: 2rem;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border-radius: 50px;
        padding: 0.75rem 1.25rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.85rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 1000;
        text-transform: uppercase;
        letter-spacing: 0.025em;
        user-select: none;
      }

      @media (max-width: 768px) {
        .favorites-toggle {
          position: relative;
          top: auto;
          left: auto;
          margin: 0 auto 1rem;
          display: block;
          width: fit-content;
        }
      }

      .favorites-toggle:hover {
        background: rgba(255, 255, 255, 0.15);
        color: rgba(255, 255, 255, 0.9);
        transform: translateY(-1px);
      }

      .favorites-toggle.active {
        background: rgba(255, 215, 0, 0.2);
        color: #ffd700;
        border-color: rgba(255, 215, 0, 0.3);
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
      }

      .favorites-toggle.active:hover {
        background: rgba(255, 215, 0, 0.3);
      }

      /* Search Bar - Minimal and Clean */
      .search-container {
        display: flex;
        justify-content: center;
        padding: 0 2rem 1.5rem;
        position: relative;
        z-index: 10;
      }

      .search-wrapper {
        position: relative;
        width: 100%;
        max-width: 400px;
      }

      .search-box {
        width: 100%;
        padding: 1rem 1.5rem 1rem 2.5rem;
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(20px);
        border-radius: 25px;
        color: white;
        font-size: 0.95rem;
        font-weight: 300;
        outline: none;
        transition: all 0.4s ease;
      }

      .search-box::placeholder {
        color: rgba(255, 255, 255, 0.5);
        font-weight: 300;
      }

      /* Search result highlighting */
      .app-name .highlight {
        background: rgba(255, 255, 0, 0.3);
        padding: 2px 4px;
        border-radius: 4px;
        font-weight: 500;
      }

      /* Empty state styling */
      .empty-state {
        text-align: center;
        padding: 4rem 2rem;
        opacity: 0.7;
        animation: fadeIn 0.5s ease;
      }

      .empty-state h3 {
        font-size: 1.5rem;
        font-weight: 300;
        margin-bottom: 1rem;
        color: rgba(255, 255, 255, 0.8);
      }

      .empty-state p {
        font-size: 1rem;
        color: rgba(255, 255, 255, 0.6);
        max-width: 300px;
        margin: 0 auto;
        line-height: 1.6;
      }

      .search-box:focus {
        background: rgba(255, 255, 255, 0.12);
        border-color: rgba(255, 255, 255, 0.3);
        transform: translateY(-1px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      }

      .search-icon {
        position: absolute;
        left: 0.875rem;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(255, 255, 255, 0.4);
        font-size: 1rem;
        pointer-events: none;
      }

      /* Category Filters - Subtle Pills */
      .filter-container {
        display: flex;
        justify-content: center;
        gap: 0.5rem;
        padding: 0 2rem 2rem;
        flex-wrap: wrap;
        position: relative;
        z-index: 10;
        max-width: 600px;
        margin: 0 auto;
      }

      .filter-btn {
        padding: 0.5rem 1rem;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.8rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 400;
        white-space: nowrap;
        letter-spacing: 0.025em;
        text-transform: uppercase;
      }

      .filter-btn:hover {
        background: rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.9);
        transform: translateY(-1px);
      }

      .filter-btn.active {
        background: rgba(255, 255, 255, 0.2);
        color: #ffffff;
        border-color: rgba(255, 255, 255, 0.3);
        font-weight: 500;
      }

      .apps-container {
        position: relative;
        width: 100%;
        min-height: calc(100vh - 350px);
        padding: 2rem;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .apps-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(min(140px, 100%), 1fr));
        gap: clamp(1rem, 3vw, 2rem);
        max-width: 1200px;
        width: 100%;
        position: relative;
        justify-items: center;
        padding: 0 1rem;
      }

      .app-bubble {
        width: 140px;
        height: 140px;
        background: rgba(255, 255, 255, 0.06);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: 24px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        position: relative;
        justify-self: center;
        opacity: 0;
        transform: translateY(20px) scale(0.95);
        overflow: hidden;
        will-change: transform, opacity;
      }

      .app-bubble.has-image {
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }

      .app-bubble.has-image::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(1px);
        border-radius: 28px;
      }

      .app-bubble.has-image .app-icon,
      .app-bubble.has-image .app-name {
        position: relative;
        z-index: 2;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      }

      .app-bubble.visible {
        opacity: 1;
        transform: translateY(0) scale(1);
      }

      .app-bubble:hover {
        background: rgba(255, 255, 255, 0.12);
        transform: translateY(-8px) scale(1.05);
        border-color: rgba(255, 255, 255, 0.25);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
      }

      .app-bubble:active {
        transform: translateY(-4px) scale(1.02);
      }

      .app-bubble:hover .app-icon {
        transform: scale(1.1);
        filter: brightness(1.2);
      }

      .app-bubble:hover .app-name {
        color: rgba(255, 255, 255, 1);
      }

      .app-bubble:focus {
        outline: 3px solid rgba(255, 255, 255, 0.6);
        outline-offset: 2px;
      }

      .app-bubble:focus-visible {
        outline: 3px solid rgba(74, 144, 226, 0.8);
        outline-offset: 2px;
      }

      .app-bubble.custom {
        border-style: dashed;
        border-color: rgba(34, 197, 94, 0.6);
        background: rgba(34, 197, 94, 0.1);
      }

      /* Elegant Favorite Heart */
      .favorite-heart {
        position: absolute;
        top: 0.75rem;
        right: 0.75rem;
        width: 20px;
        height: 20px;
        cursor: pointer;
        z-index: 10;
        opacity: 0;
        transition: all 0.3s ease;
        color: rgba(255, 255, 255, 0.4);
        font-size: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .app-bubble:hover .favorite-heart {
        opacity: 1;
      }

      .favorite-heart:hover {
        color: #ff6b9d;
        transform: scale(1.2);
      }

      .favorite-heart.favorited {
        opacity: 1;
        color: #ff6b9d;
        filter: drop-shadow(0 0 8px rgba(255, 107, 157, 0.4));
      }

      .favorite-heart.favorited:hover {
        transform: scale(1.3);
      }

      /* Subtle favorited indicator */
      .app-bubble.favorited {
        border-color: rgba(255, 107, 157, 0.3);
        background: rgba(255, 107, 157, 0.05);
      }

      /* Widget Builder Badge */
      .widget-badge {
        position: absolute;
        top: 0.75rem;
        left: 0.75rem;
        background: rgba(99, 102, 241, 0.9);
        color: white;
        padding: 0.25rem 0.5rem;
        border-radius: 6px;
        font-size: 0.65rem;
        font-weight: 600;
        letter-spacing: 0.5px;
        text-transform: uppercase;
        z-index: 5;
        opacity: 0;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
      }

      .app-bubble:hover .widget-badge {
        opacity: 1;
      }

      .widget-badge.builder {
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.95),
          rgba(139, 92, 246, 0.95)
        );
      }

      .widget-badge.tool {
        background: linear-gradient(
          135deg,
          rgba(16, 185, 129, 0.95),
          rgba(5, 150, 105, 0.95)
        );
      }

      .app-bubble.favorited::after {
        content: "";
        position: absolute;
        top: -1px;
        left: -1px;
        right: -1px;
        bottom: -1px;
        border-radius: 25px;
        background: linear-gradient(
          135deg,
          rgba(255, 107, 157, 0.2),
          transparent,
          rgba(255, 107, 157, 0.1)
        );
        z-index: -1;
        opacity: 0.6;
      }

      /* Professional Category Styling */
      .app-bubble.category-business {
        border-color: rgba(34, 197, 94, 0.2);
      }

      /* Category Colors - Widgets Mode */
      .app-bubble.category-business .app-icon {
        color: rgba(59, 130, 246, 0.95);
      }

      .app-bubble.category-websites .app-icon {
        color: rgba(139, 92, 246, 0.95);
      }

      .app-bubble.category-blog .app-icon {
        color: rgba(236, 72, 153, 0.95);
      }

      /* Category Colors - Tools Mode */
      .app-bubble.category-seo .app-icon {
        color: rgba(34, 197, 94, 0.95);
      }

      .app-bubble.category-security .app-icon {
        color: rgba(239, 68, 68, 0.95);
      }

      .app-bubble.category-finance .app-icon {
        color: rgba(251, 191, 36, 0.95);
      }

      .app-bubble.category-education .app-icon {
        color: rgba(99, 102, 241, 0.95);
      }

      /* Hover effects - make icons brighter */
      .app-bubble:hover.category-business .app-icon {
        color: rgba(59, 130, 246, 1);
      }

      .app-bubble:hover.category-websites .app-icon {
        color: rgba(139, 92, 246, 1);
      }

      .app-bubble:hover.category-blog .app-icon {
        color: rgba(236, 72, 153, 1);
      }

      .app-bubble:hover.category-seo .app-icon {
        color: rgba(34, 197, 94, 1);
      }

      .app-bubble:hover.category-security .app-icon {
        color: rgba(239, 68, 68, 1);
      }

      .app-bubble:hover.category-finance .app-icon {
        color: rgba(251, 191, 36, 1);
      }

      .app-bubble:hover.category-education .app-icon {
        color: rgba(99, 102, 241, 1);
      }

      /* Keyboard Shortcuts Hint */
      .shortcuts-hint {
        position: fixed;
        bottom: 1rem;
        right: 1rem;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(20px);
        border-radius: 15px;
        padding: 0.75rem 1rem;
        font-size: 0.75rem;
        color: rgba(255, 255, 255, 0.7);
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.3s ease;
        z-index: 1000;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .shortcuts-hint.show {
        opacity: 1;
        transform: translateY(0);
      }

      .shortcuts-hint kbd {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 4px;
        padding: 2px 6px;
        font-family: monospace;
        font-size: 0.7rem;
        margin: 0 2px;
      }

      /* Keyboard Navigation Selection */
      .app-bubble.keyboard-selected {
        transform: translateY(-8px) scale(1.05);
        box-shadow: 0 20px 40px rgba(74, 144, 226, 0.4),
          0 0 0 3px rgba(74, 144, 226, 0.6),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
        z-index: 100;
        background: linear-gradient(
          135deg,
          rgba(74, 144, 226, 0.3) 0%,
          rgba(99, 102, 241, 0.2) 50%,
          rgba(168, 85, 247, 0.3) 100%
        );
        border-color: rgba(74, 144, 226, 0.8);
      }

      @keyframes pulse {
        0%,
        100% {
          box-shadow: 0 20px 40px rgba(74, 144, 226, 0.4),
            0 0 0 3px rgba(74, 144, 226, 0.6);
        }
        50% {
          box-shadow: 0 25px 50px rgba(74, 144, 226, 0.6),
            0 0 0 5px rgba(74, 144, 226, 0.8);
        }
      }
      .app-icon {
        width: 48px;
        height: 48px;
        margin-bottom: 0.75rem;
        transition: all 0.3s ease;
        color: rgba(255, 255, 255, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .app-icon svg {
        width: 32px;
        height: 32px;
        filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.15));
        transition: all 0.3s ease;
      }

      .app-bubble:hover .app-icon svg {
        transform: scale(1.1);
        filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.2)) brightness(1.1);
      }

      /* Fallback styling for emoji icons */
      .app-icon span {
        font-size: 2.5rem;
        filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.15));
        transition: all 0.3s ease;
      }

      .app-bubble:hover .app-icon span {
        transform: scale(1.1);
        filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.2)) brightness(1.1);
      }

      /* Icon entrance animation */
      .app-icon svg,
      .app-icon span {
        animation: iconFadeIn 0.6s ease-out;
      }

      @keyframes iconFadeIn {
        from {
          opacity: 0;
          transform: scale(0.8);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      /* Skeleton Loading Animation */
      .app-bubble.loading {
        animation: pulse 2s ease-in-out infinite;
      }

      .app-bubble.loading .app-icon,
      .app-bubble.loading .app-name {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        color: transparent;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.6;
        }
      }

      .app-name {
        font-size: 0.8rem;
        font-weight: 400;
        text-align: center;
        padding: 0 0.5rem;
        color: rgba(255, 255, 255, 0.8);
        transition: all 0.3s ease;
        letter-spacing: 0.025em;
        line-height: 1.2;
      }

      /* Modal Styles */
      .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        backdrop-filter: blur(10px);
        padding: 1rem;
      }

      .modal-content {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(30px);
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 25px;
        padding: 2rem;
        max-width: 500px;
        width: 90%;
        max-height: 85vh;
        overflow-y: auto;
        position: relative;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        -webkit-overflow-scrolling: touch;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
      }

      .modal-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: white;
      }

      .close-btn {
        background: none;
        border: none;
        color: white;
        font-size: 2rem;
        cursor: pointer;
        padding: 0;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s ease;
      }

      .close-btn:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .form-group {
        margin-bottom: 1.5rem;
      }

      .form-label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: white;
      }

      .form-input {
        width: 100%;
        padding: 1rem;
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 15px;
        color: white;
        font-size: 1rem;
        outline: none;
        transition: all 0.3s ease;
      }

      .form-input:focus {
        border-color: rgba(74, 144, 226, 0.8);
        background: rgba(74, 144, 226, 0.15);
        box-shadow: 0 0 20px rgba(74, 144, 226, 0.3);
      }

      .form-input::placeholder {
        color: rgba(255, 255, 255, 0.6);
      }

      .form-select {
        width: 100%;
        padding: 1rem;
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 15px;
        color: white;
        font-size: 1rem;
        outline: none;
        cursor: pointer;
      }

      .emoji-grid {
        display: grid;
        grid-template-columns: repeat(8, 1fr);
        gap: 0.5rem;
        max-height: 200px;
        overflow-y: auto;
        padding: 1rem;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
      }

      .emoji-btn {
        padding: 0.75rem;
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid transparent;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1.5rem;
        transition: all 0.2s ease;
      }

      .emoji-btn:hover,
      .emoji-btn.selected {
        background: rgba(255, 255, 255, 0.3);
        border-color: rgba(74, 144, 226, 0.8);
        transform: scale(1.1);
      }

      .image-upload {
        border: 2px dashed rgba(255, 255, 255, 0.3);
        border-radius: 15px;
        padding: 2rem;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .image-upload:hover {
        border-color: rgba(74, 144, 226, 0.8);
        background: rgba(74, 144, 226, 0.1);
      }

      .image-upload.dragover {
        border-color: rgba(34, 197, 94, 0.8);
        background: rgba(34, 197, 94, 0.1);
      }

      .image-preview {
        width: 80px;
        height: 80px;
        border-radius: 15px;
        object-fit: cover;
        margin: 0 auto 1rem;
        display: none;
      }

      .btn-group {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
      }

      .btn {
        flex: 1;
        padding: 1rem 1.5rem;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 15px;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
      }

      .btn.primary {
        background: rgba(34, 197, 94, 0.3);
        border-color: rgba(34, 197, 94, 0.5);
      }

      .btn.primary:hover {
        background: rgba(34, 197, 94, 0.5);
      }

      @media (max-width: 768px) {
        .header {
          padding: 2rem 1rem 1rem;
          margin-top: 0;
        }

        .header h1 {
          font-size: 2rem;
          margin-bottom: 0.75rem;
        }

        .header p {
          font-size: 0.95rem;
        }

        .header .subtitle {
          font-size: 0.8rem;
          margin-bottom: 1rem;
        }

        .mode-toggle {
          padding: 0.5rem 0.8rem;
          font-size: 0.75rem;
          letter-spacing: 0.01em;
        }

        .mode-toggle-container {
          padding: 3px;
          gap: 0.25rem;
        }

        /* Improve search on mobile */
        .search-container {
          padding: 0 1rem 1rem;
        }

        .search-box {
          padding: 0.875rem 1.25rem 0.875rem 2.25rem;
          font-size: 0.9rem;
        }

        /* Better filter buttons on mobile */
        .filter-container {
          gap: 0.4rem;
          padding: 0 1rem 1.5rem;
          justify-content: center;
        }

        .filter-btn {
          padding: 0.5rem 0.85rem;
          font-size: 0.7rem;
          border-radius: 15px;
        }

        /* Optimize grid for mobile */
        .apps-container {
          padding: 1rem;
          min-height: auto;
        }

        .apps-grid {
          grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
          gap: 1rem;
          padding: 0;
        }

        .app-bubble {
          width: 100%;
          height: 130px;
          border-radius: 20px;
        }

        .app-icon {
          margin-bottom: 0.5rem;
        }

        .app-icon svg {
          width: 28px;
          height: 28px;
        }

        .app-name {
          font-size: 0.75rem;
          padding: 0 0.25rem;
        }

        .widget-badge {
          font-size: 0.5rem;
          padding: 0.2rem 0.4rem;
          border-radius: 4px;
        }

        .favorite-heart {
          width: 18px;
          height: 18px;
          font-size: 12px;
          top: 0.5rem;
          right: 0.5rem;
        }

        /* Improve modal on mobile */
        .modal-content {
          width: 95%;
          max-width: none;
          padding: 1.5rem;
          max-height: 85vh;
          border-radius: 20px;
        }

        .modal-title {
          font-size: 1.25rem;
        }

        .form-input,
        .form-select {
          padding: 0.875rem;
          font-size: 0.95rem;
        }

        /* Better notifications on mobile */
        .notification {
          max-width: 85%;
          font-size: 0.8rem;
          padding: 0.625rem 1.25rem;
        }

        /* Hide shortcuts hint on mobile */
        .shortcuts-hint {
          display: none;
        }
      }

      @media (max-width: 480px) {
        /* Stack mode toggle vertically on very small screens */
        .mode-toggle-container {
          flex-direction: column;
          width: 90%;
          padding: 4px;
          gap: 4px;
        }

        .mode-toggle {
          width: 100%;
          padding: 0.6rem;
          text-align: center;
        }

        /* Adjust header for small screens */
        .header {
          padding: 1.5rem 0.75rem 0.75rem;
        }

        .header h1 {
          font-size: 1.75rem;
        }

        .header p {
          font-size: 0.875rem;
        }

        .header .subtitle {
          font-size: 0.75rem;
        }

        /* Make filters more compact */
        .filter-container {
          gap: 0.35rem;
          padding: 0 0.75rem 1.25rem;
        }

        .filter-btn {
          padding: 0.4rem 0.7rem;
          font-size: 0.65rem;
        }

        /* Optimize grid for very small screens */
        .apps-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 0.875rem;
        }

        .app-bubble {
          width: 100%;
          height: 115px;
        }

        .app-icon svg {
          width: 24px;
          height: 24px;
        }

        .app-icon span {
          font-size: 2rem;
        }

        .app-name {
          font-size: 0.7rem;
          line-height: 1.1;
        }

        /* Smaller badges */
        .widget-badge {
          font-size: 0.45rem;
          padding: 0.15rem 0.35rem;
          top: 0.5rem;
          left: 0.5rem;
        }

        .favorite-heart {
          width: 16px;
          height: 16px;
          font-size: 11px;
        }

        /* Modal adjustments */
        .modal-content {
          width: 98%;
          padding: 1.25rem;
          border-radius: 18px;
        }

        .modal-title {
          font-size: 1.1rem;
        }

        .btn {
          padding: 0.875rem 1.25rem;
          font-size: 0.9rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>iowidgets</h1>
      <p>Build Professional Web Widgets in Minutes</p>
      <div class="subtitle">
        Create customizable, embeddable widgets for your website. Copy, paste,
        and deploy instantly.
      </div>
    </div>

    <!-- Elegant Mode Toggle -->
    <div class="mode-toggle-container">
      <button
        class="mode-toggle active"
        id="widgetsToggle"
        onclick="toggleMode('widgets')"
        aria-label="Switch to Widgets Mode"
      >
        Widgets
      </button>
      <button
        class="mode-toggle"
        id="toolsToggle"
        onclick="toggleMode('tools')"
        aria-label="Switch to Tools Mode"
      >
        Tools
      </button>
      <button
        class="mode-toggle"
        id="realtimeToggle"
        onclick="toggleMode('realtime')"
        aria-label="Switch to Real-Time Mode"
      >
        Real-Time
      </button>
    </div>

    <!-- Favorites Toggle -->
    <button
      class="favorites-toggle"
      id="favoritesToggle"
      onclick="toggleFavoritesView()"
    >
      ★ Favorites
    </button>

    <div class="search-container">
      <div class="search-wrapper">
        <span class="search-icon">⌕</span>
        <input
          type="text"
          class="search-box"
          id="searchBox"
          placeholder="Find your perfect tool..."
        />
      </div>
    </div>

    <div class="filter-container">
      <button class="filter-btn active" data-filter="all">All</button>
      <button class="filter-btn" data-filter="business">Business</button>
      <button class="filter-btn" data-filter="websites">Websites</button>
      <button class="filter-btn" data-filter="blog">Blog</button>
      <button class="filter-btn" data-filter="seo">SEO</button>
      <button class="filter-btn" data-filter="security">Security</button>
      <button class="filter-btn" data-filter="finance">Finance</button>
      <button class="filter-btn" data-filter="education">Education</button>
    </div>

    <div class="apps-container" id="appsContainer">
      <div class="apps-grid" id="appsGrid"></div>
    </div>

    <!-- Content Section for SEO -->
    <section
      style="
        max-width: 1000px;
        margin: 3rem auto;
        padding: 2rem;
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 20px;
      "
    >
      <h2
        style="
          font-size: 1.8rem;
          font-weight: 300;
          margin-bottom: 1.5rem;
          text-align: center;
        "
      >
        Why Choose iowidgets for Your Website?
      </h2>

      <div
        style="
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: 2rem;
          margin: 2rem 0;
        "
      >
        <div>
          <h3
            style="
              font-size: 1.2rem;
              font-weight: 400;
              margin-bottom: 0.75rem;
              color: rgba(255, 255, 255, 0.95);
            "
          >
            🚀 Instant Deployment
          </h3>
          <p
            style="
              color: rgba(255, 255, 255, 0.8);
              line-height: 1.7;
              font-size: 0.95rem;
            "
          >
            Generate professional widgets in seconds and embed them directly
            into your website with a simple copy-paste. No coding expertise
            required, no complex setup, and no dependencies to manage.
          </p>
        </div>

        <div>
          <h3
            style="
              font-size: 1.2rem;
              font-weight: 400;
              margin-bottom: 0.75rem;
              color: rgba(255, 255, 255, 0.95);
            "
          >
            🎨 Fully Customizable
          </h3>
          <p
            style="
              color: rgba(255, 255, 255, 0.8);
              line-height: 1.7;
              font-size: 0.95rem;
            "
          >
            Every widget can be customized to match your brand perfectly. Adjust
            colors, sizes, fonts, layouts, and functionality to create exactly
            what you need for your unique requirements.
          </p>
        </div>

        <div>
          <h3
            style="
              font-size: 1.2rem;
              font-weight: 400;
              margin-bottom: 0.75rem;
              color: rgba(255, 255, 255, 0.95);
            "
          >
            📱 Mobile-First Design
          </h3>
          <p
            style="
              color: rgba(255, 255, 255, 0.8);
              line-height: 1.7;
              font-size: 0.95rem;
            "
          >
            All widgets are built with responsive design principles, ensuring
            perfect display and functionality across desktop, tablet, and mobile
            devices. Your users get the best experience everywhere.
          </p>
        </div>

        <div>
          <h3
            style="
              font-size: 1.2rem;
              font-weight: 400;
              margin-bottom: 0.75rem;
              color: rgba(255, 255, 255, 0.95);
            "
          >
            ⚡ Lightning Fast
          </h3>
          <p
            style="
              color: rgba(255, 255, 255, 0.8);
              line-height: 1.7;
              font-size: 0.95rem;
            "
          >
            Our widgets are built with vanilla JavaScript and optimized CSS,
            resulting in minimal file sizes and blazing-fast load times. No
            heavy frameworks means better performance for your site.
          </p>
        </div>

        <div>
          <h3
            style="
              font-size: 1.2rem;
              font-weight: 400;
              margin-bottom: 0.75rem;
              color: rgba(255, 255, 255, 0.95);
            "
          >
            🔒 Privacy-Focused
          </h3>
          <p
            style="
              color: rgba(255, 255, 255, 0.8);
              line-height: 1.7;
              font-size: 0.95rem;
            "
          >
            We respect your privacy and your users' privacy. Most widgets work
            entirely client-side with no external dependencies or data
            collection. Your data stays on your device.
          </p>
        </div>

        <div>
          <h3
            style="
              font-size: 1.2rem;
              font-weight: 400;
              margin-bottom: 0.75rem;
              color: rgba(255, 255, 255, 0.95);
            "
          >
            💼 Commercial Use
          </h3>
          <p
            style="
              color: rgba(255, 255, 255, 0.8);
              line-height: 1.7;
              font-size: 0.95rem;
            "
          >
            All widgets are completely free to use in personal and commercial
            projects. No attribution required, no hidden fees, and no usage
            limits. Build your business with confidence.
          </p>
        </div>
      </div>

      <div
        style="
          margin-top: 3rem;
          padding-top: 2rem;
          border-top: 1px solid rgba(255, 255, 255, 0.15);
        "
      >
        <h3
          style="
            font-size: 1.4rem;
            font-weight: 300;
            margin-bottom: 1rem;
            text-align: center;
          "
        >
          Perfect for Every Use Case
        </h3>
        <p
          style="
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.8;
            font-size: 0.95rem;
            text-align: center;
            max-width: 800px;
            margin: 0 auto 1.5rem;
          "
        >
          Whether you're a freelance developer building client websites, a
          startup creating your MVP, an agency managing multiple projects, or a
          business owner improving your online presence, iowidgets provides the
          tools you need to succeed. Our comprehensive collection includes
          everything from essential business widgets like contact forms and
          pricing tables to productivity tools like calculators and timers, plus
          specialized utilities for SEO, security, and education.
        </p>
        <p
          style="
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.8;
            font-size: 0.95rem;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
          "
        >
          Join thousands of developers and businesses who trust iowidgets to
          power their websites. Start building professional web widgets today—no
          signup required, no credit card needed, completely free forever.
        </p>
      </div>
    </section>

    <!-- Footer -->
    <footer
      style="
        text-align: center;
        padding: 3rem 2rem 2rem;
        color: rgba(255, 255, 255, 0.6);
        font-size: 0.9rem;
      "
    >
      <p style="margin-bottom: 0.5rem">
        Built with ❤️ for developers and businesses
      </p>
      <p style="font-size: 0.8rem; opacity: 0.7; margin-bottom: 1.5rem">
        All widgets are embeddable and customizable
      </p>
      <div
        style="
          display: flex;
          justify-content: center;
          gap: 1.5rem;
          flex-wrap: wrap;
          margin-bottom: 1rem;
        "
      >
        <a
          href="about.html"
          style="
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: color 0.3s ease;
          "
          onmouseover="this.style.color='rgba(255, 255, 255, 1)'"
          onmouseout="this.style.color='rgba(255, 255, 255, 0.7)'"
          >About</a
        >
        <a
          href="contact.html"
          style="
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: color 0.3s ease;
          "
          onmouseover="this.style.color='rgba(255, 255, 255, 1)'"
          onmouseout="this.style.color='rgba(255, 255, 255, 0.7)'"
          >Contact</a
        >
        <a
          href="privacy-policy.html"
          style="
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: color 0.3s ease;
          "
          onmouseover="this.style.color='rgba(255, 255, 255, 1)'"
          onmouseout="this.style.color='rgba(255, 255, 255, 0.7)'"
          >Privacy Policy</a
        >
        <a
          href="terms-of-service.html"
          style="
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: color 0.3s ease;
          "
          onmouseover="this.style.color='rgba(255, 255, 255, 1)'"
          onmouseout="this.style.color='rgba(255, 255, 255, 0.7)'"
          >Terms of Service</a
        >
      </div>
      <p style="font-size: 0.75rem; opacity: 0.6">
        © 2025 iowidgets. All rights reserved.
      </p>
    </footer>

    <!-- Elegant Notification -->
    <div class="notification" id="notification"></div>

    <!-- Cookie Consent Banner -->
    <div
      id="cookieConsent"
      style="
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(20px);
        padding: 1.5rem;
        z-index: 10001;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        display: none;
        animation: slideUp 0.4s ease;
      "
    >
      <div
        style="
          max-width: 1200px;
          margin: 0 auto;
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 2rem;
          flex-wrap: wrap;
        "
      >
        <div style="flex: 1; min-width: 300px">
          <p
            style="
              color: rgba(255, 255, 255, 0.9);
              margin: 0;
              font-size: 0.9rem;
              line-height: 1.6;
            "
          >
            We use cookies and similar technologies to enhance your experience,
            analyze site traffic, and display personalized ads through Google
            Analytics and Google Ads. By clicking "Accept", you consent to our
            use of cookies.
            <a
              href="privacy-policy.html"
              style="color: #4a90e2; text-decoration: underline"
              >Learn more</a
            >
          </p>
        </div>
        <div style="display: flex; gap: 1rem; flex-wrap: wrap">
          <button
            onclick="acceptCookies()"
            style="
              padding: 0.75rem 1.5rem;
              background: rgba(74, 144, 226, 0.9);
              border: none;
              border-radius: 10px;
              color: white;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.3s ease;
              font-size: 0.9rem;
            "
            onmouseover="this.style.background='rgba(74, 144, 226, 1)'"
            onmouseout="this.style.background='rgba(74, 144, 226, 0.9)'"
          >
            Accept All
          </button>
          <button
            onclick="rejectCookies()"
            style="
              padding: 0.75rem 1.5rem;
              background: rgba(255, 255, 255, 0.1);
              border: 1px solid rgba(255, 255, 255, 0.3);
              border-radius: 10px;
              color: white;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.3s ease;
              font-size: 0.9rem;
            "
            onmouseover="this.style.background='rgba(255, 255, 255, 0.2)'"
            onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'"
          >
            Reject Non-Essential
          </button>
        </div>
      </div>
    </div>

    <style>
      @keyframes slideUp {
        from {
          transform: translateY(100%);
        }
        to {
          transform: translateY(0);
        }
      }
    </style>

    <script>
      // Cookie Consent Management
      function checkCookieConsent() {
        const consent = localStorage.getItem("iowidgets-cookie-consent");
        if (!consent) {
          document.getElementById("cookieConsent").style.display = "block";
        }
      }

      function acceptCookies() {
        localStorage.setItem("iowidgets-cookie-consent", "accepted");
        document.getElementById("cookieConsent").style.display = "none";
        // Google Analytics will continue to work as it's already loaded
        showNotification("Cookie preferences saved", "success");
      }

      function rejectCookies() {
        localStorage.setItem("iowidgets-cookie-consent", "rejected");
        document.getElementById("cookieConsent").style.display = "none";
        // Disable Google Analytics
        window["ga-disable-G-S15806B1HW"] = true;
        showNotification("Non-essential cookies disabled", "success");
      }

      // Check consent on page load
      window.addEventListener("load", checkCookieConsent);

      // Professional SVG Icon Library - All Consistent Stroke Style
      const iconSVGs = {
        // Actual Widgets We Have
        "contact-form": `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="5" width="18" height="14" rx="2"/><path d="M3 7l9 6 9-6"/></svg>`,

        "pricing-table": `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="2" x2="12" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>`,

        calculator: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="16" y1="10" x2="16" y2="10.01"/><line x1="12" y1="10" x2="12" y2="10.01"/><line x1="8" y1="10" x2="8" y2="10.01"/><line x1="16" y1="14" x2="16" y2="14.01"/><line x1="12" y1="14" x2="12" y2="14.01"/><line x1="8" y1="14" x2="8" y2="14.01"/><line x1="16" y1="18" x2="16" y2="18.01"/><line x1="12" y1="18" x2="12" y2="18.01"/><line x1="8" y1="18" x2="8" y2="18.01"/></svg>`,

        clock: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`,

        timer: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="10" y1="2" x2="14" y2="2"/><line x1="12" y1="14" x2="15" y2="11"/><circle cx="12" cy="14" r="8"/></svg>`,

        quote: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/><path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"/></svg>`,

        // New Widget Icons - All Consistent Stroke Style
        button: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="8" width="18" height="8" rx="3"/></svg>`,

        badge: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>`,

        progress: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="6" x2="14" y2="6"/><line x1="4" y1="18" x2="18" y2="18"/></svg>`,

        share: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>`,

        testimonial: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>`,

        color: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="13.5" cy="6.5" r=".5" fill="currentColor"/><circle cx="17.5" cy="10.5" r=".5" fill="currentColor"/><circle cx="8.5" cy="7.5" r=".5" fill="currentColor"/><circle cx="6.5" cy="12.5" r=".5" fill="currentColor"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"/></svg>`,

        ruler: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.42 17.18L17.18 21.42c-.78.78-2.05.78-2.83 0l-12-12c-.78-.78-.78-2.05 0-2.83L6.58 2.42c.78-.78 2.05-.78 2.83 0l12 12c.78.78.78 2.05 0 2.83z"/><path d="M7 8l3 3"/><path d="M10.5 11.5l3 3"/><path d="M14 15l3 3"/></svg>`,

        lock: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>`,

        qr: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>`,

        text: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 7 4 4 20 4 20 7"/><line x1="9" y1="20" x2="15" y2="20"/><line x1="12" y1="4" x2="12" y2="20"/></svg>`,

        pomodoro: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/><path d="M8 2h8"/></svg>`,

        keyboard: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"/><line x1="6" y1="8" x2="6.01" y2="8"/><line x1="10" y1="8" x2="10.01" y2="8"/><line x1="14" y1="8" x2="14.01" y2="8"/><line x1="18" y1="8" x2="18.01" y2="8"/><line x1="8" y1="12" x2="8.01" y2="12"/><line x1="12" y1="12" x2="12.01" y2="12"/><line x1="16" y1="12" x2="16.01" y2="12"/><line x1="7" y1="16" x2="17" y2="16"/></svg>`,

        lightning: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>`,

        counter: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></svg>`,

        stopwatch: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="10" y1="2" x2="14" y2="2"/><line x1="12" y1="14" x2="15" y2="11"/><circle cx="12" cy="14" r="8"/></svg>`,
      };

      const defaultApps = [
        // WIDGETS CATEGORY - Embeddable Widget Builders
        // Business subcategory
        {
          id: "contact-form",
          name: "Contact Form Builder",
          icon: "contact-form",
          category: "business",
          url: "widgets/contact-form.html",
          builtin: true,
          badge: "builder",
        },
        {
          id: "pricing-table",
          name: "Pricing Table Builder",
          icon: "pricing-table",
          category: "business",
          url: "widgets/pricing-table.html",
          builtin: true,
          badge: "builder",
        },
        {
          id: "testimonial",
          name: "Testimonial Card",
          icon: "testimonial",
          category: "business",
          url: "widgets/testimonial.html",
          builtin: true,
          badge: "builder",
        },
        // Websites subcategory
        {
          id: "button-generator",
          name: "Button Generator",
          icon: "button",
          category: "websites",
          url: "widgets/button-generator.html",
          builtin: true,
          badge: "builder",
        },
        {
          id: "badge-maker",
          name: "Badge Maker",
          icon: "badge",
          category: "websites",
          url: "widgets/badge-maker.html",
          builtin: true,
          badge: "builder",
        },
        // Blog subcategory

        // TOOLS CATEGORY - Utilities & Calculators
        // SEO subcategory
        {
          id: "text-counter",
          name: "Text Counter",
          icon: "text",
          category: "seo",
          url: "widgets/text-counter.html",
          builtin: true,
          badge: "tool",
        },
        {
          id: "qr-generator",
          name: "QR Code Generator",
          icon: "qr",
          category: "seo",
          url: "widgets/qr-generator.html",
          builtin: true,
          badge: "tool",
        },
        // Security subcategory
        {
          id: "password-strength",
          name: "Password Strength Checker",
          icon: "lock",
          category: "security",
          url: "widgets/password-strength.html",
          builtin: true,
          badge: "tool",
        },
        // Finance subcategory
        {
          id: "calculator-widget",
          name: "Calculator",
          icon: "calculator",
          category: "finance",
          url: "widgets/calculator.html",
          builtin: true,
          badge: "tool",
        },
        {
          id: "unit-converter",
          name: "Unit Converter",
          icon: "ruler",
          category: "finance",
          url: "widgets/unit-converter.html",
          builtin: true,
          badge: "tool",
        },
        // Education subcategory
        {
          id: "quote-widget",
          name: "Daily Quote",
          icon: "quote",
          category: "education",
          url: "widgets/quote.html",
          builtin: true,
          badge: "tool",
        },
        {
          id: "color-converter",
          name: "Color Converter",
          icon: "color",
          category: "education",
          url: "widgets/color-converter.html",
          builtin: true,
          badge: "tool",
        },

        // REALTIME CATEGORY - Live Updating Widgets
        // Finance subcategory
        {
          id: "clock-widget",
          name: "Live Clock",
          icon: "clock",
          category: "finance",
          url: "widgets/clock.html",
          builtin: true,
          badge: "tool",
        },
        {
          id: "countdown-timer",
          name: "Countdown Timer",
          icon: "timer",
          category: "finance",
          url: "widgets/countdown.html",
          builtin: true,
          badge: "tool",
        },
        {
          id: "pomodoro",
          name: "Pomodoro Timer",
          icon: "pomodoro",
          category: "finance",
          url: "widgets/pomodoro.html",
          builtin: true,
          badge: "tool",
        },
        // SEO subcategory
        {
          id: "stopwatch",
          name: "Stopwatch",
          icon: "stopwatch",
          category: "seo",
          url: "widgets/stopwatch.html",
          builtin: true,
          badge: "tool",
        },
        {
          id: "typing-speed",
          name: "Typing Speed Test",
          icon: "keyboard",
          category: "seo",
          url: "widgets/typing-speed.html",
          builtin: true,
          badge: "tool",
        },
        {
          id: "reaction-time",
          name: "Reaction Time Test",
          icon: "lightning",
          category: "seo",
          url: "widgets/reaction-time.html",
          builtin: true,
          badge: "tool",
        },
        {
          id: "counter",
          name: "Live Counter",
          icon: "counter",
          category: "seo",
          url: "widgets/counter.html",
          builtin: true,
          badge: "tool",
        },
      ];
      let apps = [...defaultApps];
      let customApps = JSON.parse(
        localStorage.getItem("iowidgets-custom") || "[]"
      );
      apps = [...defaultApps, ...customApps];

      // Widgets/Tools/Real-Time Mode Categories
      let currentMode = "widgets";
      const widgetsCategories = ["business", "websites", "blog"];
      const toolsCategories = ["seo", "security", "finance", "education"];
      const realtimeCategories = ["finance", "seo"];

      // Favorites system
      let favorites = JSON.parse(
        localStorage.getItem("iowidgets-favorites") || "[]"
      );
      let showingFavoritesOnly = false;

      const container = document.getElementById("appsContainer");
      const grid = document.getElementById("appsGrid");
      let currentFilter = "all";
      let searchTerm = "";

      const emojis = [
        "📱",
        "💻",
        "🖥️",
        "⌚",
        "📷",
        "🎮",
        "🕹️",
        "🎵",
        "🎬",
        "📺",
        "🎨",
        "✏️",
        "📝",
        "📊",
        "📈",
        "🧮",
        "⏰",
        "⏱️",
        "⏲️",
        "📅",
        "🔧",
        "⚙️",
        "🔨",
        "🛠️",
        "⚖️",
        "🔍",
        "🔐",
        "🗝️",
        "🔒",
        "🔓",
        "💡",
        "🔋",
        "📡",
        "📶",
        "💾",
        "💿",
        "📀",
        "💽",
        "🖨️",
        "📠",
        "☁️",
        "🌐",
        "🌍",
        "🗺️",
        "🧭",
        "⭐",
        "🌟",
        "✨",
        "💫",
        "🔮",
        "🎯",
        "🏆",
        "🥇",
        "🏅",
        "🎗️",
        "🎖️",
        "🏵️",
        "🎀",
        "🎁",
        "🎊",
      ];

      // Sort apps by category for better organization
      const categoryOrder = [
        "business",
        "websites",
        "blog",
        "seo",
        "security",
        "finance",
        "education",
      ];

      function createBubble(app, index) {
        const bubble = document.createElement("div");
        const isFavorited = favorites.includes(app.id);
        bubble.className = `app-bubble category-${app.category}${
          app.backgroundImage ? " has-image" : ""
        }${!app.builtin ? " custom" : ""}${isFavorited ? " favorited" : ""}`;
        bubble.dataset.category = app.category;
        bubble.dataset.appId = app.id;

        if (app.backgroundImage) {
          bubble.style.backgroundImage = `url(${app.backgroundImage})`;
        }

        const favoriteIcon = isFavorited ? "♥" : "♡";
        const favoriteClass = isFavorited ? "favorited" : "";

        // Use SVG icon if available, fallback to emoji
        const iconContent =
          iconSVGs[app.icon] ||
          `<span style="font-size: 2.5rem;">${app.icon}</span>`;

        const badgeText =
          app.badge === "builder"
            ? "Builder"
            : app.badge === "tool"
            ? "Tool"
            : "";
        const badgeHTML = badgeText
          ? `<div class="widget-badge ${app.badge}">${badgeText}</div>`
          : "";

        bubble.innerHTML = `
          ${badgeHTML}
          <div class="favorite-heart ${favoriteClass}" onclick="toggleFavorite('${app.id}')" title="Add to favorites">
            ${favoriteIcon}
          </div>
          <div class="app-icon">${iconContent}</div>
          <div class="app-name">${app.name}</div>
        `;

        // Add accessibility attributes
        bubble.setAttribute("tabindex", "0");
        bubble.setAttribute("role", "button");
        bubble.setAttribute("aria-label", `Open ${app.name} app`);

        // Add gentle floating animation with staggered delay
        bubble.style.animation = `gentleFloat ${
          6 + Math.random() * 2
        }s ease-in-out infinite`;
        bubble.style.animationDelay = `${index * 0.1 + Math.random() * 0.5}s`;

        const handleAppActivation = (e) => {
          if (e.target.closest(".app-actions")) return;

          // Add click feedback
          bubble.style.transform = "scale(0.95)";
          console.log(
            `Attempting to open app: ${app.name} with URL: ${app.url}`
          );

          setTimeout(() => {
            bubble.style.transform = "";
            if (app.url !== "#") {
              // Add error handling for broken links
              try {
                console.log(`Opening ${app.name} in new window...`);
                const newWindow = window.open(
                  app.url,
                  "_blank",
                  "noopener,noreferrer"
                );
                if (
                  !newWindow ||
                  newWindow.closed ||
                  typeof newWindow.closed == "undefined"
                ) {
                  console.error("Window was blocked or failed to open");
                  showNotification(
                    `Could not open ${app.name}. Check if popup blocker is enabled.`,
                    "error"
                  );
                } else {
                  console.log(`Successfully opened ${app.name}`);
                  showNotification(`Opening ${app.name}...`, "success");
                }
              } catch (error) {
                console.error("Error opening app:", error);
                showNotification(
                  `Error opening ${app.name}. Please try again.`,
                  "error"
                );
              }
            } else {
              console.log(`${app.name} is marked as coming soon`);
              showNotification(`${app.name} - Coming Soon!`, "error");
            }
          }, 150);
        };

        // Improve click handling with better event delegation
        bubble.addEventListener("click", (e) => {
          console.log(
            "Bubble clicked:",
            e.target,
            e.target.closest(".app-actions")
          );

          // Check if click is on action buttons
          if (e.target.closest(".app-actions")) {
            console.log("Click on action button, not opening app");
            e.stopPropagation();
            return;
          }

          // Stop event bubbling to prevent conflicts
          e.stopPropagation();
          handleAppActivation(e);
        });

        bubble.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            e.stopPropagation();
            handleAppActivation(e);
          }
        });

        // Add touch event handling for mobile
        bubble.addEventListener("touchstart", (e) => {
          bubble.style.transform = "scale(0.95)";
        });

        bubble.addEventListener("touchend", (e) => {
          setTimeout(() => {
            bubble.style.transform = "";
          }, 150);
        });

        return bubble;
      }

      function displayApps() {
        let filteredApps = apps;

        // Filter by widgets/tools/realtime mode first
        let availableCategories;
        if (currentMode === "widgets") {
          availableCategories = widgetsCategories;
        } else if (currentMode === "tools") {
          availableCategories = toolsCategories;
        } else {
          availableCategories = realtimeCategories;
        }
        filteredApps = apps.filter((app) =>
          availableCategories.includes(app.category)
        );

        // Filter by favorites
        if (showingFavoritesOnly) {
          filteredApps = filteredApps.filter((app) =>
            favorites.includes(app.id)
          );
        }

        // Filter by category
        if (currentFilter !== "all") {
          filteredApps = filteredApps.filter(
            (app) => app.category === currentFilter
          );
        }

        // Filter by search term
        if (searchTerm) {
          filteredApps = filteredApps.filter((app) =>
            app.name.toLowerCase().includes(searchTerm.toLowerCase())
          );
        }

        // Sort apps
        filteredApps.sort((a, b) => {
          const aIndex = categoryOrder.indexOf(a.category);
          const bIndex = categoryOrder.indexOf(b.category);
          if (aIndex === bIndex) {
            return a.name.localeCompare(b.name);
          }
          return aIndex - bIndex;
        });

        // Clear the grid
        grid.innerHTML = "";

        if (filteredApps.length === 0) {
          grid.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 4rem 2rem; opacity: 0.7;">
              <h3>No apps found</h3>
              <p>Try adjusting your search or filters</p>
            </div>
          `;
          return;
        }

        // Create and add bubbles with staggered animation
        filteredApps.forEach((app, index) => {
          const bubble = createBubble(app, index);
          grid.appendChild(bubble);

          // Animate in with delay
          setTimeout(() => {
            bubble.classList.add("visible");
          }, index * 50);
        });
      }

      // App Management Functions
      function saveApps() {
        const customOnly = apps.filter((app) => !app.builtin);
        localStorage.setItem("iowidgets-custom", JSON.stringify(customOnly));
      }

      function generateId() {
        return (
          "app_" + Date.now() + "_" + Math.random().toString(36).substr(2, 9)
        );
      }

      function showNotification(message, type = "success") {
        const notification = document.getElementById("notification");
        notification.textContent = message;
        notification.className = `notification ${type}`;
        notification.classList.add("show");

        setTimeout(() => {
          notification.classList.remove("show");
        }, 3000);
      }

      // Favorites Functions
      function saveFavorites() {
        localStorage.setItem("iowidgets-favorites", JSON.stringify(favorites));
      }

      function toggleFavorite(appId) {
        const index = favorites.indexOf(appId);
        if (index > -1) {
          favorites.splice(index, 1);
          showNotification("Removed from favorites", "success");
        } else {
          favorites.push(appId);
          showNotification("Added to favorites", "success");
        }
        saveFavorites();
        displayApps();
      }

      function toggleFavoritesView() {
        showingFavoritesOnly = !showingFavoritesOnly;
        const button = document.getElementById("favoritesToggle");

        if (showingFavoritesOnly) {
          button.textContent = "← All Widgets";
          button.classList.add("active");

          // Reset other filters when showing favorites
          currentFilter = "all";
          searchTerm = "";
          document.getElementById("searchBox").value = "";
          document.querySelectorAll(".filter-btn").forEach((btn) => {
            btn.classList.remove("active");
            if (btn.dataset.filter === "all") {
              btn.classList.add("active");
            }
          });

          showNotification(
            `${favorites.length} favorites in your collection`,
            "success"
          );
        } else {
          button.textContent = "★ Favorites";
          button.classList.remove("active");
          showNotification("Browse all available widgets", "success");
        }

        displayApps();
      }

      function deleteApp(id) {
        const app = apps.find((a) => a.id === id);
        if (!app || app.builtin) return;

        if (confirm(`Delete "${app.name}"?`)) {
          apps = apps.filter((a) => a.id !== id);
          // Also remove from favorites if it was favorited
          const favIndex = favorites.indexOf(id);
          if (favIndex > -1) {
            favorites.splice(favIndex, 1);
            saveFavorites();
          }
          saveApps();
          displayApps();
          showNotification("App deleted successfully");
        }
      }

      // Search functionality
      document.getElementById("searchBox").addEventListener("input", (e) => {
        searchTerm = e.target.value.trim();
        displayApps();
      });

      // Filter functionality
      document.querySelectorAll(".filter-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          // Update active button
          document
            .querySelectorAll(".filter-btn")
            .forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");

          // Update filter and refresh display
          currentFilter = btn.dataset.filter;

          // Add transition effect
          const bubbles = document.querySelectorAll(".app-bubble");
          bubbles.forEach((bubble, index) => {
            bubble.style.transition = "all 0.3s ease";
            bubble.style.transform = "translateY(20px) scale(0.8)";
            bubble.style.opacity = "0";
          });

          setTimeout(() => {
            displayApps();
          }, 300);
        });
      });

      // Keyboard shortcuts
      document.addEventListener("keydown", (e) => {
        if (e.ctrlKey || e.metaKey) {
          if (e.key === "f") {
            e.preventDefault();
            toggleFavoritesView();
          }
        }
      });

      // Responsive handling
      window.addEventListener("resize", () => {
        // Small delay to ensure proper recalculation
        setTimeout(displayApps, 100);
      });

      // Widgets/Tools/Real-Time Mode Functions
      function toggleMode(mode) {
        currentMode = mode;

        // Update corner toggle states
        document
          .getElementById("widgetsToggle")
          .classList.toggle("active", mode === "widgets");
        document
          .getElementById("toolsToggle")
          .classList.toggle("active", mode === "tools");
        document
          .getElementById("realtimeToggle")
          .classList.toggle("active", mode === "realtime");

        // Update body class for background
        document.body.classList.toggle("realtime-mode", mode === "realtime");
        document.body.classList.toggle("tools-mode", mode === "tools");

        // Filter apps based on mode
        let availableCategories;
        if (mode === "widgets") {
          availableCategories = widgetsCategories;
        } else if (mode === "tools") {
          availableCategories = toolsCategories;
        } else {
          availableCategories = realtimeCategories;
        }

        // Reset filters when switching modes
        currentFilter = "all";
        searchTerm = "";
        showingFavoritesOnly = false;

        // Update UI
        document.getElementById("searchBox").value = "";
        document.getElementById("favoritesToggle").textContent = "★ Favorites";
        document.getElementById("favoritesToggle").classList.remove("active");

        // Update filter buttons
        updateFilterButtons(availableCategories);

        displayApps();

        // Count apps in this mode
        const modeApps = apps.filter((app) =>
          availableCategories.includes(app.category)
        );
        showNotification(
          `${mode.toUpperCase()} Mode • ${modeApps.length} apps available`,
          "success"
        );
      }

      function updateFilterButtons(availableCategories) {
        const filterContainer = document.querySelector(".filter-container");
        const allBtn =
          '<button class="filter-btn active" data-filter="all">All</button>';

        if (currentMode === "widgets") {
          filterContainer.innerHTML =
            allBtn +
            `
            <button class="filter-btn" data-filter="business">Business</button>
            <button class="filter-btn" data-filter="websites">Websites</button>
            <button class="filter-btn" data-filter="blog">Blog</button>
          `;
        } else if (currentMode === "tools") {
          filterContainer.innerHTML =
            allBtn +
            `
            <button class="filter-btn" data-filter="seo">SEO</button>
            <button class="filter-btn" data-filter="security">Security</button>
            <button class="filter-btn" data-filter="finance">Finance</button>
            <button class="filter-btn" data-filter="education">Education</button>
          `;
        } else {
          filterContainer.innerHTML =
            allBtn +
            `
            <button class="filter-btn" data-filter="finance">Finance</button>
            <button class="filter-btn" data-filter="seo">SEO</button>
          `;
        }

        // Re-attach event listeners
        document.querySelectorAll(".filter-btn").forEach((btn) => {
          btn.addEventListener("click", () => {
            document
              .querySelectorAll(".filter-btn")
              .forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");
            currentFilter = btn.dataset.filter;

            const bubbles = document.querySelectorAll(".app-bubble");
            bubbles.forEach((bubble, index) => {
              bubble.style.transition = "all 0.3s ease";
              bubble.style.transform = "translateY(20px) scale(0.8)";
              bubble.style.opacity = "0";
            });

            setTimeout(() => {
              displayApps();
            }, 300);
          });
        });
      }

      // Window focus event to refresh background when returning from apps
      window.addEventListener("focus", () => {
        // Force repaint to prevent black screen
        document.body.style.transform = "translateZ(0)";
        setTimeout(() => {
          document.body.style.transform = "";
        }, 10);
      });

      // Page visibility API to handle background refresh
      document.addEventListener("visibilitychange", () => {
        if (!document.hidden) {
          // Refresh background when page becomes visible
          document.body.style.willChange = "background";
          setTimeout(() => {
            document.body.style.willChange = "auto";
          }, 100);
        }
      });

      // Advanced Keyboard Navigation System
      let searchIndex = -1;
      let keyboardMode = false;

      // Create shortcuts hint element
      const shortcutsHint = document.createElement("div");
      shortcutsHint.className = "shortcuts-hint";
      shortcutsHint.innerHTML = `
        <kbd>/</kbd> Focus search • <kbd>↑</kbd><kbd>↓</kbd> Navigate • <kbd>Enter</kbd> Open • <kbd>M</kbd> Toggle mode • <kbd>Esc</kbd> Clear
      `;
      document.body.appendChild(shortcutsHint);

      // Show keyboard hints briefly on load
      setTimeout(() => {
        shortcutsHint.classList.add("show");
        setTimeout(() => shortcutsHint.classList.remove("show"), 3500);
      }, 1000);

      document.addEventListener("keydown", (e) => {
        const visibleBubbles = Array.from(
          document.querySelectorAll(".app-bubble")
        ).filter((b) => b.style.display !== "none" && b.style.opacity !== "0");

        switch (e.key) {
          case "/":
            if (document.activeElement.tagName !== "INPUT") {
              e.preventDefault();
              document.getElementById("searchBox").focus();
              shortcutsHint.classList.add("show");
              setTimeout(() => shortcutsHint.classList.remove("show"), 2500);
            }
            break;

          case "ArrowDown":
            if (keyboardMode || document.activeElement.id === "searchBox") {
              e.preventDefault();
              keyboardMode = true;
              searchIndex = Math.min(
                searchIndex + 1,
                visibleBubbles.length - 1
              );
              updateKeyboardSelection(visibleBubbles);
            }
            break;

          case "ArrowUp":
            if (keyboardMode || searchIndex >= 0) {
              e.preventDefault();
              keyboardMode = true;
              searchIndex = Math.max(searchIndex - 1, -1);
              updateKeyboardSelection(visibleBubbles);
              if (searchIndex === -1) {
                document.getElementById("searchBox").focus();
                keyboardMode = false;
              }
            }
            break;

          case "Enter":
            if (searchIndex >= 0 && visibleBubbles[searchIndex]) {
              e.preventDefault();
              visibleBubbles[searchIndex].click();
            }
            break;

          case "m":
          case "M":
            if (document.activeElement.tagName !== "INPUT") {
              e.preventDefault();
              const currentModeButton = document.querySelector(
                ".mode-toggle .active"
              );
              let nextMode;
              if (currentModeButton.id === "workToggle") {
                nextMode = "learn";
              } else if (currentModeButton.id === "learnToggle") {
                nextMode = "fun";
              } else {
                nextMode = "work";
              }
              toggleMode(nextMode);
              shortcutsHint.classList.add("show");
              setTimeout(() => shortcutsHint.classList.remove("show"), 2000);
            }
            break;

          case "f":
          case "F":
            if (
              document.activeElement.tagName !== "INPUT" &&
              !e.ctrlKey &&
              !e.metaKey
            ) {
              e.preventDefault();
              document.getElementById("favoritesToggle").click();
              shortcutsHint.classList.add("show");
              setTimeout(() => shortcutsHint.classList.remove("show"), 2000);
            }
            break;

          case "Escape":
            e.preventDefault();
            const searchBox = document.getElementById("searchBox");
            searchBox.value = "";
            searchBox.dispatchEvent(new Event("input"));
            searchBox.blur();
            searchIndex = -1;
            keyboardMode = false;
            updateKeyboardSelection(visibleBubbles);
            break;

          case "1":
          case "2":
          case "3":
          case "4":
          case "5":
            if (document.activeElement.tagName !== "INPUT") {
              e.preventDefault();
              const filterBtns = document.querySelectorAll(".filter-btn");
              const index = parseInt(e.key) - 1;
              if (filterBtns[index]) {
                filterBtns[index].click();
                shortcutsHint.classList.add("show");
                setTimeout(() => shortcutsHint.classList.remove("show"), 2000);
              }
            }
            break;
        }
      });

      function updateKeyboardSelection(bubbles) {
        // Remove previous selection
        document
          .querySelectorAll(".app-bubble.keyboard-selected")
          .forEach((b) => {
            b.classList.remove("keyboard-selected");
          });

        // Add current selection with enhanced visual feedback
        if (searchIndex >= 0 && bubbles[searchIndex]) {
          const selectedBubble = bubbles[searchIndex];
          selectedBubble.classList.add("keyboard-selected");
          selectedBubble.scrollIntoView({
            block: "center",
            behavior: "smooth",
            inline: "center",
          });

          // Add subtle pulse animation
          selectedBubble.style.animation = "pulse 1.5s ease-in-out infinite";
        } else {
          // Clear animations when no selection
          bubbles.forEach((b) => {
            b.style.animation = "";
          });
        }
      }

      // Reset keyboard navigation on mouse interaction
      document.addEventListener("mousemove", () => {
        if (keyboardMode) {
          keyboardMode = false;
          searchIndex = -1;
          updateKeyboardSelection([]);
        }
      });

      // PWA Installation & Offline Support
      let deferredPrompt;
      let isInstalled = false;

      // Check if app is already installed
      if (window.matchMedia("(display-mode: standalone)").matches) {
        isInstalled = true;
      }

      // Create install button
      const installBtn = document.createElement("button");
      installBtn.innerHTML = `
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
        </svg>
        Install App
      `;
      installBtn.style.cssText = `
        position: fixed;
        top: 1rem;
        left: 1rem;
        background: rgba(74, 144, 226, 0.9);
        color: white;
        border: none;
        padding: 0.75rem 1rem;
        border-radius: 12px;
        cursor: pointer;
        font-size: 0.9rem;
        font-weight: 600;
        display: none;
        align-items: center;
        gap: 0.5rem;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
        z-index: 1001;
      `;

      installBtn.addEventListener("mouseenter", () => {
        installBtn.style.background = "rgba(74, 144, 226, 1)";
        installBtn.style.transform = "translateY(-2px)";
      });

      installBtn.addEventListener("mouseleave", () => {
        installBtn.style.background = "rgba(74, 144, 226, 0.9)";
        installBtn.style.transform = "translateY(0)";
      });

      if (!isInstalled) {
        document.body.appendChild(installBtn);
      }

      // Listen for beforeinstallprompt event
      window.addEventListener("beforeinstallprompt", (e) => {
        e.preventDefault();
        deferredPrompt = e;
        if (!isInstalled) {
          installBtn.style.display = "flex";
        }
      });

      // Handle install button click
      installBtn.addEventListener("click", async () => {
        if (deferredPrompt) {
          deferredPrompt.prompt();
          const { outcome } = await deferredPrompt.userChoice;

          if (outcome === "accepted") {
            showNotification("App installed successfully! 🎉", "success");
            installBtn.style.display = "none";
          }

          deferredPrompt = null;
        }
      });

      // Register service worker for offline functionality
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", async () => {
          try {
            const registration = await navigator.serviceWorker.register(
              "/sw.js"
            );
            console.log("ServiceWorker registered:", registration);

            // Check for updates
            registration.addEventListener("updatefound", () => {
              const newWorker = registration.installing;
              newWorker.addEventListener("statechange", () => {
                if (
                  newWorker.state === "installed" &&
                  navigator.serviceWorker.controller
                ) {
                  showNotification(
                    "New version available! Refresh to update.",
                    "info"
                  );
                }
              });
            });
          } catch (error) {
            console.log("ServiceWorker registration failed:", error);
          }
        });
      }

      // Smart App Recommendations System
      class AppRecommendations {
        constructor() {
          this.usage = JSON.parse(localStorage.getItem("appUsage") || "{}");
          this.preferences = JSON.parse(
            localStorage.getItem("userPreferences") || "{}"
          );
          this.timePatterns = JSON.parse(
            localStorage.getItem("timePatterns") || "{}"
          );
        }

        trackUsage(appName) {
          const now = new Date();
          const hour = now.getHours();
          const day = now.getDay();

          if (!this.usage[appName]) {
            this.usage[appName] = { count: 0, lastUsed: 0, timePattern: {} };
          }

          this.usage[appName].count++;
          this.usage[appName].lastUsed = Date.now();

          // Track time patterns
          const timeKey = `${day}-${hour}`;
          if (!this.usage[appName].timePattern[timeKey]) {
            this.usage[appName].timePattern[timeKey] = 0;
          }
          this.usage[appName].timePattern[timeKey]++;

          this.saveData();
        }

        getRecommendations() {
          const now = new Date();
          const hour = now.getHours();
          const day = now.getDay();
          const timeKey = `${day}-${hour}`;

          // Time-based recommendations
          let recommendations = [];

          if (hour >= 9 && hour <= 17) {
            // Work hours
            recommendations = apps.filter((app) =>
              ["business", "technology", "operations"].includes(app.category)
            );
          } else if (hour >= 18 && hour <= 22) {
            // Evening learning time
            recommendations = apps.filter((app) =>
              ["learn", "wellness"].includes(app.category)
            );
          } else {
            // Personal/fun time
            recommendations = apps.filter((app) =>
              ["wellness", "general", "entertainment"].includes(app.category)
            );
          }

          // Add usage-based recommendations
          const sortedByUsage = Object.entries(this.usage)
            .sort(([, a], [, b]) => b.count - a.count)
            .slice(0, 3)
            .map(([name]) => apps.find((app) => app.name === name))
            .filter(Boolean);

          // Add time pattern recommendations
          const timeBasedApps = Object.entries(this.usage)
            .filter(([, data]) => data.timePattern[timeKey] > 0)
            .sort(
              ([, a], [, b]) =>
                (b.timePattern[timeKey] || 0) - (a.timePattern[timeKey] || 0)
            )
            .slice(0, 2)
            .map(([name]) => apps.find((app) => app.name === name))
            .filter(Boolean);

          // Combine and deduplicate
          const combined = [
            ...recommendations,
            ...sortedByUsage,
            ...timeBasedApps,
          ];
          const unique = combined.filter(
            (app, index, self) =>
              index === self.findIndex((a) => a.name === app.name)
          );

          return unique.slice(0, 4);
        }

        saveData() {
          localStorage.setItem("appUsage", JSON.stringify(this.usage));
        }
      }

      const recommendations = new AppRecommendations();

      // Create recommendations section
      function createRecommendationsSection() {
        const recommended = recommendations.getRecommendations();
        if (recommended.length === 0) return "";

        return `
          <div class="recommendations-section">
            <div class="section-header">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="12 2 15.09 8.26 22 9 17 14 18.18 21 12 17.77 5.82 21 7 14 2 9 8.91 8.26 12 2"/>
              </svg>
              <h3>Recommended for You</h3>
            </div>
            <div class="recommendations-grid">
              ${recommended
                .map(
                  (app) => `
                <div class="recommendation-item" data-app="${app.name}">
                  <div class="rec-icon">${iconSVGs[app.icon] || "🔧"}</div>
                  <div class="rec-info">
                    <div class="rec-name">${app.name}</div>
                    <div class="rec-reason">${getRecommendationReason(
                      app
                    )}</div>
                  </div>
                </div>
              `
                )
                .join("")}
            </div>
          </div>
        `;
      }

      function getRecommendationReason(app) {
        const usage = recommendations.usage[app.name];
        const now = new Date();
        const hour = now.getHours();

        if (usage && usage.count > 5) {
          return "Frequently used";
        } else if (
          hour >= 9 &&
          hour <= 17 &&
          ["business", "technology", "operations"].includes(app.category)
        ) {
          return "Perfect for work time";
        } else if (
          hour >= 18 &&
          hour <= 22 &&
          ["learn", "wellness"].includes(app.category)
        ) {
          return "Great for learning";
        } else if (
          (hour >= 23 || hour <= 8) &&
          ["wellness", "general"].includes(app.category)
        ) {
          return "Perfect for downtime";
        } else {
          return "Trending now";
        }
      }

      // Add recommendations CSS
      const recommendationsCSS = `
        .recommendations-section {
          margin-bottom: 2rem;
          padding: 1.5rem;
          background: rgba(255, 255, 255, 0.08);
          border-radius: 20px;
          border: 1px solid rgba(255, 255, 255, 0.12);
          backdrop-filter: blur(20px);
        }

        .section-header {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          margin-bottom: 1rem;
          color: rgba(255, 255, 255, 0.9);
        }

        .section-header h3 {
          margin: 0;
          font-size: 1.1rem;
          font-weight: 600;
        }

        .recommendations-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 1rem;
        }

        .recommendation-item {
          display: flex;
          align-items: center;
          gap: 1rem;
          padding: 1rem;
          background: rgba(255, 255, 255, 0.05);
          border-radius: 15px;
          border: 1px solid rgba(255, 255, 255, 0.1);
          cursor: pointer;
          transition: all 0.3s ease;
        }

        .recommendation-item:hover {
          background: rgba(255, 255, 255, 0.1);
          transform: translateY(-2px);
          border-color: rgba(74, 144, 226, 0.5);
        }

        .rec-icon {
          width: 40px;
          height: 40px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: rgba(74, 144, 226, 0.2);
          border-radius: 12px;
          color: rgba(74, 144, 226, 1);
          font-size: 1.2rem;
        }

        .rec-info {
          flex: 1;
        }

        .rec-name {
          font-weight: 600;
          color: white;
          margin-bottom: 0.25rem;
        }

        .rec-reason {
          font-size: 0.8rem;
          color: rgba(255, 255, 255, 0.6);
        }

        @media (max-width: 768px) {
          .recommendations-grid {
            grid-template-columns: 1fr;
          }

          .recommendation-item {
            padding: 0.75rem;
          }
        }
      `;

      // Add CSS to head
      const style = document.createElement("style");
      style.textContent = recommendationsCSS;
      document.head.appendChild(style);

      // Recommendations functionality will be re-implemented later
      // For now, just use the original displayApps to fix the issue

      // App usage tracking will be re-implemented later

      // Initialize the app
      displayApps();
    </script>
  </body>
</html>
