<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-S15806B1HW"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-S15806B1HW");
    </script>

    <!-- Primary Meta Tags -->
    <title>
      Contact Form Builder - Create Custom Contact Forms | iowidgets
    </title>
    <meta
      name="title"
      content="Contact Form Builder - Create Custom Contact Forms | iowidgets"
    />
    <meta
      name="description"
      content="Build and customize beautiful contact forms for your website in seconds. No coding required. Mobile-friendly, fully customizable, and easy to embed."
    />
    <meta
      name="keywords"
      content="contact form builder, form generator, custom contact form, embed contact form, web form builder, email form, contact widget"
    />
    <meta name="author" content="iowidgets" />
    <meta name="robots" content="index, follow" />
    <link
      rel="canonical"
      href="https://iowidgets.com/widgets/contact-form.html"
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://iowidgets.com/widgets/contact-form.html"
    />
    <meta
      property="og:title"
      content="Contact Form Builder - Create Custom Contact Forms"
    />
    <meta
      property="og:description"
      content="Build and customize beautiful contact forms for your website in seconds. No coding required. Mobile-friendly and easy to embed."
    />
    <meta
      property="og:image"
      content="https://iowidgets.com/assets/contact-form-preview.png"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta
      property="twitter:url"
      content="https://iowidgets.com/widgets/contact-form.html"
    />
    <meta
      property="twitter:title"
      content="Contact Form Builder - Create Custom Contact Forms"
    />
    <meta
      property="twitter:description"
      content="Build and customize beautiful contact forms for your website in seconds. No coding required."
    />
    <meta
      property="twitter:image"
      content="https://iowidgets.com/assets/contact-form-preview.png"
    />

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://formsubmit.co" />
    <link rel="dns-prefetch" href="https://formsubmit.co" />

    <link rel="stylesheet" href="../assets/shared.css" />

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Contact Form Builder",
        "applicationCategory": "DesignApplication",
        "description": "Build and customize beautiful contact forms for your website in seconds. No coding required.",
        "url": "https://iowidgets.com/widgets/contact-form.html",
        "operatingSystem": "Any",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "featureList": [
          "Customizable contact forms",
          "Mobile responsive design",
          "Multiple themes",
          "Email integration",
          "Easy embed code"
        ]
      }
    </script>
    <style>
      /* Mobile-first approach */
      * {
        box-sizing: border-box;
      }

      :root {
        --primary-color: #667eea;
        --transition-speed: 0.3s;
      }

      /* Respect user's motion preferences */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      .widget-container {
        max-width: 900px;
        margin: 0 auto;
        padding: 1rem;
      }

      @media (min-width: 768px) {
        .widget-container {
          padding: 2rem;
          margin: 2rem auto;
        }
      }

      .tool-section {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border-radius: 15px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: transform var(--transition-speed) ease,
          box-shadow var(--transition-speed) ease;
      }

      @media (min-width: 768px) {
        .tool-section {
          border-radius: 20px;
          padding: 2rem;
          margin-bottom: 2rem;
        }
      }

      .tool-section:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
      }

      .tool-section h2 {
        color: white;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-size: 1.5rem;
      }

      @media (max-width: 767px) {
        .tool-section h2 {
          font-size: 1.25rem;
        }
      }

      .tool-section h2 svg {
        width: 24px;
        height: 24px;
        flex-shrink: 0;
      }

      @media (min-width: 768px) {
        .tool-section h2 svg {
          width: 28px;
          height: 28px;
        }
      }

      .embed-section {
        background: rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(20px);
        border-radius: 15px;
        padding: 1.5rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: transform var(--transition-speed) ease;
      }

      @media (min-width: 768px) {
        .embed-section {
          border-radius: 20px;
          padding: 2rem;
        }
      }

      .code-block {
        background: #1e1e1e;
        border-radius: 10px;
        padding: 1rem;
        overflow-x: auto;
        margin: 1rem 0;
        position: relative;
        scrollbar-width: thin;
        scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
      }

      .code-block::-webkit-scrollbar {
        height: 8px;
      }

      .code-block::-webkit-scrollbar-track {
        background: transparent;
      }

      .code-block::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 4px;
      }

      .code-block::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.5);
      }

      .code-block pre {
        margin: 0;
        color: #d4d4d4;
        font-family: "SF Mono", "Monaco", "Inconsolata", "Fira Code",
          "Droid Sans Mono", "Source Code Pro", monospace;
        font-size: 0.8rem;
        line-height: 1.5;
        -webkit-font-smoothing: antialiased;
      }

      @media (min-width: 768px) {
        .code-block pre {
          font-size: 0.85rem;
        }
      }

      .copy-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(99, 102, 241, 0.8);
        color: white;
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        cursor: pointer;
        font-size: 0.85rem;
        transition: all var(--transition-speed) ease;
        font-weight: 500;
        min-height: 44px; /* Touch-friendly */
        display: flex;
        align-items: center;
        gap: 0.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      .copy-btn:hover {
        background: rgba(99, 102, 241, 1);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
      }

      .copy-btn:active {
        transform: translateY(0);
      }

      .copy-btn:focus-visible {
        outline: 2px solid #fff;
        outline-offset: 2px;
      }

      .copy-btn.copied {
        background: rgba(34, 197, 94, 0.8);
      }

      .back-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        margin: 1rem auto 2rem;
        padding: 0.75rem 1.5rem;
        background: rgba(255, 255, 255, 0.1);
        color: white;
        text-decoration: none;
        border-radius: 50px;
        transition: all var(--transition-speed) ease;
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        font-weight: 500;
        min-height: 44px; /* Touch-friendly */
      }

      .back-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      .back-btn:focus-visible {
        outline: 2px solid #fff;
        outline-offset: 2px;
      }

      .settings-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
        margin: 1.5rem 0;
      }

      @media (min-width: 640px) {
        .settings-grid {
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }
      }

      .setting-item {
        background: rgba(255, 255, 255, 0.05);
        padding: 1rem;
        border-radius: 10px;
        transition: background var(--transition-speed) ease;
      }

      .setting-item:focus-within {
        background: rgba(255, 255, 255, 0.08);
        outline: 2px solid rgba(99, 102, 241, 0.5);
      }

      .setting-item label {
        display: block;
        color: rgba(255, 255, 255, 0.9);
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
      }

      .setting-item input[type="text"],
      .setting-item input[type="email"],
      .setting-item input[type="number"],
      .setting-item input[type="url"],
      .setting-item select,
      .setting-item textarea {
        width: 100%;
        padding: 0.75rem;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: rgba(0, 0, 0, 0.3);
        color: white;
        font-size: 0.9rem;
        transition: all var(--transition-speed) ease;
        font-family: inherit;
        min-height: 44px; /* Touch-friendly */
      }

      .setting-item input[type="text"]:focus,
      .setting-item input[type="email"]:focus,
      .setting-item input[type="number"]:focus,
      .setting-item input[type="url"]:focus,
      .setting-item select:focus,
      .setting-item textarea:focus {
        outline: none;
        border-color: rgba(99, 102, 241, 0.8);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        background: rgba(0, 0, 0, 0.4);
      }

      .setting-item input.error {
        border-color: rgba(239, 68, 68, 0.8);
      }

      .setting-item input.success {
        border-color: rgba(34, 197, 94, 0.8);
      }

      .setting-item .field-error {
        color: rgba(239, 68, 68, 0.9);
        font-size: 0.8rem;
        margin-top: 0.25rem;
        display: none;
      }

      .setting-item input.error + .field-error {
        display: block;
      }

      .setting-item input[type="checkbox"] {
        margin-right: 0.5rem;
        width: 20px;
        height: 20px;
        cursor: pointer;
        accent-color: #667eea;
      }

      .setting-item .char-counter {
        font-size: 0.8rem;
        color: rgba(255, 255, 255, 0.6);
        text-align: right;
        margin-top: 0.25rem;
      }

      .generate-btn {
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.9),
          rgba(139, 92, 246, 0.9)
        );
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: all var(--transition-speed) ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        margin: 1.5rem auto;
        box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        min-height: 48px; /* Touch-friendly */
        width: 100%;
        max-width: 300px;
      }

      .generate-btn:hover:not(:disabled) {
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 1),
          rgba(139, 92, 246, 1)
        );
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
      }

      .generate-btn:active:not(:disabled) {
        transform: translateY(0);
      }

      .generate-btn:focus-visible {
        outline: 2px solid #fff;
        outline-offset: 2px;
      }

      .generate-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      .generate-btn .spinner {
        width: 16px;
        height: 16px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-top-color: white;
        border-radius: 50%;
        animation: spin 0.6s linear infinite;
        display: none;
      }

      .generate-btn.loading .spinner {
        display: block;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .error-message {
        background: rgba(239, 68, 68, 0.1);
        border-left: 3px solid rgba(239, 68, 68, 0.8);
        padding: 1rem;
        border-radius: 8px;
        margin: 1rem 0;
        color: rgba(255, 255, 255, 0.9);
        font-size: 0.9rem;
        display: flex;
        align-items: start;
        gap: 0.75rem;
        animation: slideIn 0.3s ease;
      }

      .error-message svg {
        width: 20px;
        height: 20px;
        flex-shrink: 0;
        margin-top: 2px;
      }

      .success-message {
        background: rgba(34, 197, 94, 0.1);
        border-left: 3px solid rgba(34, 197, 94, 0.8);
        padding: 1rem;
        border-radius: 8px;
        margin: 1rem 0;
        color: rgba(255, 255, 255, 0.9);
        font-size: 0.9rem;
        display: flex;
        align-items: start;
        gap: 0.75rem;
        animation: slideIn 0.3s ease;
      }

      .success-message svg {
        width: 20px;
        height: 20px;
        flex-shrink: 0;
        margin-top: 2px;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .note {
        background: rgba(255, 193, 7, 0.1);
        border-left: 3px solid rgba(255, 193, 7, 0.8);
        padding: 1rem;
        border-radius: 8px;
        margin: 1rem 0;
        color: rgba(255, 255, 255, 0.9);
        font-size: 0.9rem;
        display: flex;
        align-items: start;
        gap: 0.75rem;
      }

      .note svg {
        width: 20px;
        height: 20px;
        flex-shrink: 0;
        margin-top: 2px;
      }

      .page-header {
        text-align: center;
        margin: 1.5rem 0 2rem 0;
        padding: 0 1rem;
      }

      @media (min-width: 768px) {
        .page-header {
          margin: 2rem 0 3rem 0;
        }
      }

      .page-header h1 {
        color: white;
        font-size: 2rem;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        flex-wrap: wrap;
        line-height: 1.2;
      }

      @media (min-width: 768px) {
        .page-header h1 {
          font-size: 2.5rem;
          gap: 1rem;
        }
      }

      .page-header h1 svg {
        width: 36px;
        height: 36px;
        flex-shrink: 0;
      }

      @media (min-width: 768px) {
        .page-header h1 svg {
          width: 48px;
          height: 48px;
        }
      }

      .page-header p {
        color: rgba(255, 255, 255, 0.8);
        font-size: 1rem;
        line-height: 1.5;
      }

      @media (min-width: 768px) {
        .page-header p {
          font-size: 1.1rem;
        }
      }

      /* Loading state */
      .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
      }

      .loading-overlay.active {
        display: flex;
      }

      /* Tooltip */
      .tooltip {
        position: relative;
        display: inline-block;
        margin-left: 0.25rem;
      }

      .tooltip svg {
        width: 16px;
        height: 16px;
        color: rgba(255, 255, 255, 0.6);
        cursor: help;
      }

      .tooltip:hover svg {
        color: rgba(255, 255, 255, 0.9);
      }

      .tooltip .tooltiptext {
        visibility: hidden;
        width: 200px;
        background-color: rgba(0, 0, 0, 0.9);
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 0.5rem;
        position: absolute;
        z-index: 1;
        bottom: 125%;
        left: 50%;
        margin-left: -100px;
        opacity: 0;
        transition: opacity var(--transition-speed) ease;
        font-size: 0.8rem;
      }

      .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
      }

      /* Preview form styles */
      .preview-form-container {
        animation: fadeIn 0.5s ease;
      }
    </style>
  </head>
  <body>
    <div class="widget-container">
      <a
        href="../index.html"
        class="back-btn"
        aria-label="Back to iowidgets home"
      >
        <svg
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          width="20"
          height="20"
          aria-hidden="true"
        >
          <path d="M19 12H5M12 19l-7-7 7-7" />
        </svg>
        Back to iowidgets
      </a>

      <header class="page-header">
        <h1>
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            aria-hidden="true"
          >
            <path
              d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
            />
          </svg>
          Contact Form Builder
        </h1>
        <p>Create a customized contact form and embed it on your website</p>
      </header>

      <!-- Settings Section -->
      <section class="tool-section" aria-labelledby="settings-heading">
        <h2 id="settings-heading">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            aria-hidden="true"
          >
            <circle cx="12" cy="12" r="3" />
            <path
              d="M12 1v6m0 6v6m5.2-14.2l-4.2 4.2m0 6l-4.2 4.2M23 12h-6m-6 0H1m17.8 5.2l-4.2-4.2m0-6l-4.2-4.2"
            />
          </svg>
          Customize Your Form
        </h2>

        <div class="settings-grid">
          <div class="setting-item">
            <label for="recipientEmail"
              >Your Email Address*
              <span class="tooltip">
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  aria-hidden="true"
                >
                  <circle cx="12" cy="12" r="10" />
                  <path d="M12 16v-4m0-4h.01" />
                </svg>
                <span class="tooltiptext"
                  >Form submissions will be sent to this email</span
                >
              </span>
            </label>
            <input
              type="email"
              id="recipientEmail"
              placeholder="you@example.com"
              value=""
              aria-required="true"
              aria-describedby="email-error"
              autocomplete="email"
            />
            <div id="email-error" class="field-error">
              Please enter a valid email address
            </div>
          </div>

          <div class="setting-item">
            <label for="formTitle">Form Title</label>
            <input
              type="text"
              id="formTitle"
              value="Get in Touch"
              maxlength="100"
              aria-describedby="title-counter"
            />
            <div id="title-counter" class="char-counter">0/100</div>
          </div>

          <div class="setting-item">
            <label for="buttonText">Button Text</label>
            <input
              type="text"
              id="buttonText"
              value="Send Message"
              maxlength="50"
              aria-describedby="button-counter"
            />
            <div id="button-counter" class="char-counter">0/50</div>
          </div>

          <div class="setting-item">
            <label for="themeColor">Theme Color</label>
            <select
              id="themeColor"
              aria-label="Select theme color for your form"
            >
              <option value="#667eea">Purple (Default)</option>
              <option value="#3b82f6">Blue</option>
              <option value="#10b981">Green</option>
              <option value="#f59e0b">Orange</option>
              <option value="#ef4444">Red</option>
              <option value="#ec4899">Pink</option>
              <option value="#14b8a6">Teal</option>
            </select>
          </div>
        </div>

        <div class="settings-grid">
          <div class="setting-item">
            <label for="includePhone">
              <input type="checkbox" id="includePhone" checked />
              Include Phone Number Field
            </label>
          </div>

          <div class="setting-item">
            <label for="includeCompany">
              <input type="checkbox" id="includeCompany" />
              Include Company Field
            </label>
          </div>

          <div class="setting-item">
            <label for="includeSubject">
              <input type="checkbox" id="includeSubject" />
              Include Subject Field
            </label>
          </div>
        </div>

        <div class="settings-grid">
          <div class="setting-item">
            <label for="redirectUrl"
              >Success Redirect URL (Optional)
              <span class="tooltip">
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  aria-hidden="true"
                >
                  <circle cx="12" cy="12" r="10" />
                  <path d="M12 16v-4m0-4h.01" />
                </svg>
                <span class="tooltiptext"
                  >Redirect users to this URL after successful submission</span
                >
              </span>
            </label>
            <input
              type="url"
              id="redirectUrl"
              placeholder="https://yoursite.com/thank-you"
              aria-describedby="redirect-hint"
            />
            <div
              id="redirect-hint"
              style="
                color: rgba(255, 255, 255, 0.6);
                font-size: 0.8rem;
                margin-top: 0.25rem;
              "
            >
              Leave empty for default thank you page
            </div>
          </div>

          <div class="setting-item">
            <label for="formSubject"
              >Email Subject Line
              <span class="tooltip">
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  aria-hidden="true"
                >
                  <circle cx="12" cy="12" r="10" />
                  <path d="M12 16v-4m0-4h.01" />
                </svg>
                <span class="tooltiptext"
                  >Customize the subject line of emails you receive</span
                >
              </span>
            </label>
            <input
              type="text"
              id="formSubject"
              placeholder="New Contact Form Submission"
              value="New Contact Form Submission"
              maxlength="100"
            />
          </div>
        </div>

        <div class="note">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            aria-hidden="true"
          >
            <circle cx="12" cy="12" r="10" />
            <path d="M12 16v-4m0-4h.01" />
          </svg>
          <div>
            <strong>Note:</strong> This demo uses FormSubmit.co to handle form
            submissions. In production, you'd want to use your own backend or
            service like FormSpree, EmailJS, or AWS SES for better security and
            control.
          </div>
        </div>

        <button
          class="generate-btn"
          onclick="generateCode()"
          aria-label="Generate embed code for your contact form"
        >
          <span class="spinner"></span>
          <span class="btn-text">Generate Embed Code</span>
        </button>
      </section>

      <!-- Preview Section -->
      <section
        class="tool-section"
        id="previewSection"
        style="display: none"
        aria-labelledby="preview-heading"
      >
        <h2 id="preview-heading">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            aria-hidden="true"
          >
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
            <circle cx="12" cy="12" r="3" />
          </svg>
          Live Preview
        </h2>
        <div id="formPreview" class="preview-form-container"></div>
      </section>

      <!-- Embed Code Section -->
      <section
        class="embed-section"
        id="embedSection"
        style="display: none"
        aria-labelledby="embed-heading"
      >
        <h2
          id="embed-heading"
          style="display: flex; align-items: center; gap: 0.75rem; color: white"
        >
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            style="width: 28px; height: 28px"
            aria-hidden="true"
          >
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
            <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1" />
          </svg>
          Your Embed Code
        </h2>
        <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 1rem">
          Copy and paste this code into your website:
        </p>

        <div class="code-block">
          <button
            class="copy-btn"
            onclick="copyEmbedCode()"
            aria-label="Copy embed code to clipboard"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              width="16"
              height="16"
              aria-hidden="true"
            >
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
              <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1" />
            </svg>
            <span>Copy Code</span>
          </button>
          <pre
            id="embedCode"
            role="textbox"
            aria-label="Embed code"
            aria-readonly="true"
          ></pre>
        </div>

        <p
          style="
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
          "
        >
          <svg
            viewBox="0 0 24 24"
            fill="currentColor"
            style="width: 18px; height: 18px; color: #fbbf24; flex-shrink: 0"
            aria-hidden="true"
          >
            <path
              d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
            />
          </svg>
          The form will send submissions to:
          <span
            id="emailDisplay"
            style="color: #fbbf24; font-weight: 600"
          ></span>
        </p>
      </section>
    </div>

    <script>
      // Real-time validation and character counting
      const emailInput = document.getElementById("recipientEmail");
      const titleInput = document.getElementById("formTitle");
      const buttonInput = document.getElementById("buttonText");

      // Character counters
      function setupCharCounter(inputId, counterId, maxLength) {
        const input = document.getElementById(inputId);
        const counter = document.getElementById(counterId);

        function updateCounter() {
          const length = input.value.length;
          counter.textContent = `${length}/${maxLength}`;
          counter.style.color =
            length >= maxLength * 0.9
              ? "rgba(239, 68, 68, 0.9)"
              : "rgba(255, 255, 255, 0.6)";
        }

        input.addEventListener("input", updateCounter);
        updateCounter();
      }

      setupCharCounter("formTitle", "title-counter", 100);
      setupCharCounter("buttonText", "button-counter", 50);

      // Email validation
      emailInput.addEventListener("input", function () {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (this.value && !emailRegex.test(this.value)) {
          this.classList.add("error");
          this.classList.remove("success");
        } else if (this.value) {
          this.classList.remove("error");
          this.classList.add("success");
        } else {
          this.classList.remove("error", "success");
        }
      });

      // Debounce function for performance
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      function generateCode() {
        // Remove any existing messages
        const existingMessages = document.querySelectorAll(
          ".error-message, .success-message"
        );
        existingMessages.forEach((msg) => msg.remove());

        const email = emailInput.value.trim();
        const title = titleInput.value.trim() || "Get in Touch";
        const buttonText = buttonInput.value.trim() || "Send Message";
        const themeColor = document.getElementById("themeColor").value;
        const includePhone = document.getElementById("includePhone").checked;
        const includeCompany =
          document.getElementById("includeCompany").checked;
        const includeSubject =
          document.getElementById("includeSubject").checked;
        const redirectUrl = document.getElementById("redirectUrl").value.trim();
        const formSubject =
          document.getElementById("formSubject").value.trim() ||
          "New Contact Form Submission";

        // Validation
        if (!email) {
          showError(
            "Email Required",
            "Please enter your email address to receive form submissions.",
            emailInput
          );
          return;
        }

        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          showError(
            "Invalid Email",
            "Please enter a valid email address (e.g., you@example.com).",
            emailInput
          );
          return;
        }

        if (redirectUrl && !isValidUrl(redirectUrl)) {
          showError(
            "Invalid URL",
            "Please enter a valid redirect URL starting with http:// or https://",
            document.getElementById("redirectUrl")
          );
          return;
        }

        // Show loading state
        const generateBtn = document.querySelector(".generate-btn");
        generateBtn.classList.add("loading");
        generateBtn.disabled = true;

        // Simulate generation delay for better UX
        setTimeout(() => {
          // Generate form fields
          const phoneField = includePhone
            ? generateFormField("tel", "phone", "Phone", false)
            : "";
          const companyField = includeCompany
            ? generateFormField("text", "company", "Company", false)
            : "";
          const subjectField = includeSubject
            ? generateFormField("text", "subject", "Subject", true)
            : "";

          // Generate hidden fields for FormSubmit configuration
          const hiddenFields = generateHiddenFields(redirectUrl, formSubject);

          const embedCode = `<!-- iowidgets Contact Form -->
<div id="iowidgets-contact-form"></div>
<script>
(function() {
    const container = document.getElementById('iowidgets-contact-form');
    container.innerHTML = \\\`
        <div style="max-width:500px;margin:0 auto;background:#fff;padding:2rem;border-radius:15px;box-shadow:0 10px 40px rgba(0,0,0,0.1);">
            <h2 style="margin-bottom:1.5rem;color:#333;text-align:center;font-size:1.75rem;font-weight:700;">${escapeHtml(
              title
            )}</h2>
            <form action="https://formsubmit.co/${escapeHtml(
              email
            )}" method="POST" style="width:100%;">
                ${hiddenFields}
                ${generateFormField("text", "name", "Name", true)}
                ${generateFormField("email", "email", "Email", true)}
                ${subjectField}
                ${phoneField}
                ${companyField}
                <div style="margin-bottom:1rem;">
                    <label style="display:block;margin-bottom:0.5rem;color:#333;font-weight:500;">Message*</label>
                    <textarea name="message" required rows="5" style="width:100%;padding:0.75rem;border:1px solid #ddd;border-radius:8px;resize:vertical;font-family:inherit;font-size:0.95rem;transition:border-color 0.3s,box-shadow 0.3s;" onfocus="this.style.borderColor='${themeColor}';this.style.boxShadow='0 0 0 3px ${themeColor}20'" onblur="this.style.borderColor='#ddd';this.style.boxShadow='none'"></textarea>
                </div>
                <button type="submit" style="width:100%;padding:1rem;background:${themeColor};color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s;box-shadow:0 4px 12px ${themeColor}40;" onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 20px ${themeColor}60'" onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 4px 12px ${themeColor}40'">
                    ${escapeHtml(buttonText)}
                </button>
            </form>
        </div>
    \\\`;
})();
<\/script>`;

          // Show preview
          document.getElementById("formPreview").innerHTML =
            generatePreviewHTML(
              title,
              buttonText,
              themeColor,
              includePhone,
              includeCompany,
              includeSubject
            );

          const previewSection = document.getElementById("previewSection");
          const embedSection = document.getElementById("embedSection");

          previewSection.style.display = "block";
          previewSection.style.animation = "slideIn 0.5s ease";

          // Show embed code
          document.getElementById("embedCode").textContent = embedCode;
          document.getElementById("emailDisplay").textContent = email;
          embedSection.style.display = "block";
          embedSection.style.animation = "slideIn 0.5s ease";

          // Remove loading state
          generateBtn.classList.remove("loading");
          generateBtn.disabled = false;

          // Show success message
          showSuccess(
            "Code Generated Successfully!",
            "Your contact form embed code is ready. Copy and paste it into your website."
          );

          // Scroll to preview section smoothly
          setTimeout(() => {
            previewSection.scrollIntoView({
              behavior: "smooth",
              block: "nearest",
            });
          }, 100);
        }, 500);
      }

      function generateFormField(type, name, label, required) {
        const requiredAttr = required ? " required" : "";
        const requiredMark = required ? "*" : "";
        const placeholder =
          type === "email" ? "your@email.com" : `Your ${label.toLowerCase()}`;

        return `<div style="margin-bottom:1rem;">
                    <label style="display:block;margin-bottom:0.5rem;color:#333;font-weight:500;">${label}${requiredMark}</label>
                    <input type="${type}" name="${name}"${requiredAttr} placeholder="${placeholder}" style="width:100%;padding:0.75rem;border:1px solid #ddd;border-radius:8px;font-size:0.95rem;transition:border-color 0.3s,box-shadow 0.3s;" onfocus="this.style.borderColor='${
          document.getElementById("themeColor").value
        }';this.style.boxShadow='0 0 0 3px ${
          document.getElementById("themeColor").value
        }20'" onblur="this.style.borderColor='#ddd';this.style.boxShadow='none'" />
                </div>`;
      }

      function generateHiddenFields(redirectUrl, formSubject) {
        let fields = `<input type="hidden" name="_subject" value="${escapeHtml(
          formSubject
        )}">
                <input type="hidden" name="_captcha" value="false">`;

        if (redirectUrl) {
          fields += `\n                <input type="hidden" name="_next" value="${escapeHtml(
            redirectUrl
          )}">`;
        }

        return fields;
      }

      function generatePreviewHTML(
        title,
        buttonText,
        themeColor,
        includePhone,
        includeCompany,
        includeSubject
      ) {
        const phoneField = includePhone
          ? generatePreviewField("tel", "Phone")
          : "";
        const companyField = includeCompany
          ? generatePreviewField("text", "Company")
          : "";
        const subjectField = includeSubject
          ? generatePreviewField("text", "Subject", true)
          : "";

        return `
                <div style="max-width:500px;margin:0 auto;background:#fff;padding:2rem;border-radius:15px;box-shadow:0 10px 40px rgba(0,0,0,0.1);">
                    <h2 style="margin-bottom:1.5rem;color:#333;text-align:center;font-size:1.75rem;font-weight:700;">${escapeHtml(
                      title
                    )}</h2>
                    <form onsubmit="return false;">
                        ${generatePreviewField("text", "Name", true)}
                        ${generatePreviewField("email", "Email", true)}
                        ${subjectField}
                        ${phoneField}
                        ${companyField}
                        <div style="margin-bottom:1rem;">
                            <label style="display:block;margin-bottom:0.5rem;color:#333;font-weight:500;">Message*</label>
                            <textarea disabled rows="5" style="width:100%;padding:0.75rem;border:1px solid #ddd;border-radius:8px;resize:vertical;font-family:inherit;font-size:0.95rem;" placeholder="Your message..."></textarea>
                        </div>
                        <button type="button" style="width:100%;padding:1rem;background:${themeColor};color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:not-allowed;opacity:0.7;box-shadow:0 4px 12px ${themeColor}40;">
                            ${escapeHtml(buttonText)}
                        </button>
                    </form>
                </div>
            `;
      }

      function generatePreviewField(type, label, required = false) {
        const requiredMark = required ? "*" : "";
        const placeholder =
          type === "email" ? "your@email.com" : `Your ${label.toLowerCase()}`;

        return `<div style="margin-bottom:1rem;">
                    <label style="display:block;margin-bottom:0.5rem;color:#333;font-weight:500;">${label}${requiredMark}</label>
                    <input type="${type}" disabled style="width:100%;padding:0.75rem;border:1px solid #ddd;border-radius:8px;font-size:0.95rem;" placeholder="${placeholder}" />
                </div>`;
      }

      function escapeHtml(text) {
        const map = {
          "&": "&amp;",
          "<": "&lt;",
          ">": "&gt;",
          '"': "&quot;",
          "'": "&#039;",
        };
        return text.replace(/[&<>"']/g, (m) => map[m]);
      }

      function isValidUrl(string) {
        try {
          const url = new URL(string);
          return url.protocol === "http:" || url.protocol === "https:";
        } catch (_) {
          return false;
        }
      }

      function showError(title, message, focusElement) {
        const errorDiv = document.createElement("div");
        errorDiv.className = "error-message";
        errorDiv.setAttribute("role", "alert");
        errorDiv.innerHTML = `
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="8" x2="12" y2="12"/>
              <line x1="12" y1="16" x2="12.01" y2="16"/>
            </svg>
            <div>
              <strong>${title}:</strong> ${message}
            </div>
          `;
        document
          .querySelector(".generate-btn")
          .insertAdjacentElement("beforebegin", errorDiv);

        if (focusElement) {
          focusElement.focus();
          focusElement.scrollIntoView({ behavior: "smooth", block: "center" });
        }
      }

      function showSuccess(title, message) {
        const successDiv = document.createElement("div");
        successDiv.className = "success-message";
        successDiv.setAttribute("role", "status");
        successDiv.innerHTML = `
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            <div>
              <strong>${title}</strong> ${message}
            </div>
          `;
        document
          .querySelector(".generate-btn")
          .insertAdjacentElement("beforebegin", successDiv);

        // Auto-remove after 5 seconds
        setTimeout(() => {
          successDiv.style.opacity = "0";
          setTimeout(() => successDiv.remove(), 300);
        }, 5000);
      }

      function copyEmbedCode() {
        const code = document.getElementById("embedCode").textContent;

        navigator.clipboard
          .writeText(code)
          .then(() => {
            const btn = document.querySelector(".copy-btn");
            const btnText = btn.querySelector("span:last-child");
            const originalText = btnText.textContent;

            btnText.textContent = "Copied!";
            btn.classList.add("copied");

            // Show success feedback
            const toast = document.createElement("div");
            toast.className = "success-message";
            toast.style.position = "fixed";
            toast.style.bottom = "2rem";
            toast.style.right = "2rem";
            toast.style.zIndex = "9999";
            toast.style.maxWidth = "300px";
            toast.setAttribute("role", "status");
            toast.innerHTML = `
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            <div>
              <strong>Copied!</strong> Embed code copied to clipboard.
            </div>
          `;
            document.body.appendChild(toast);

            setTimeout(() => {
              btnText.textContent = originalText;
              btn.classList.remove("copied");
              toast.style.opacity = "0";
              setTimeout(() => toast.remove(), 300);
            }, 2000);
          })
          .catch((err) => {
            console.error("Failed to copy:", err);
            showError(
              "Copy Failed",
              "Failed to copy code. Please select and copy manually."
            );
          });
      }

      // Keyboard shortcuts
      document.addEventListener("keydown", (e) => {
        // Ctrl/Cmd + Enter to generate
        if ((e.ctrlKey || e.metaKey) && e.key === "Enter") {
          e.preventDefault();
          generateCode();
        }
      });

      // Initialize tooltips for touch devices
      if ("ontouchstart" in window) {
        document.querySelectorAll(".tooltip").forEach((tooltip) => {
          tooltip.addEventListener("touchstart", (e) => {
            e.preventDefault();
            const tooltiptext = tooltip.querySelector(".tooltiptext");
            tooltiptext.style.visibility = "visible";
            tooltiptext.style.opacity = "1";

            setTimeout(() => {
              tooltiptext.style.visibility = "hidden";
              tooltiptext.style.opacity = "0";
            }, 3000);
          });
        });
      }

      // Announce page for screen readers
      const announcement = document.createElement("div");
      announcement.setAttribute("role", "status");
      announcement.setAttribute("aria-live", "polite");
      announcement.className = "sr-only";
      announcement.style.position = "absolute";
      announcement.style.left = "-10000px";
      announcement.style.width = "1px";
      announcement.style.height = "1px";
      announcement.style.overflow = "hidden";
      document.body.appendChild(announcement);
    </script>
  </body>
</html>
