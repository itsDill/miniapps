<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pomodoro Timer - Focus & Productivity Tool | iowidgets</title>
    <meta
      name="description"
      content="Free Pomodoro timer with customizable work and break intervals, session tracking, and notifications. Boost productivity with the proven Pomodoro Technique. 25-minute focus sessions."
    />
    <meta
      name="keywords"
      content="pomodoro timer, focus timer, productivity timer, pomodoro technique, work timer, break timer, time management, focus tool, study timer, concentration timer"
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://iowidgets.com/widgets/pomodoro.html"
    />
    <meta
      property="og:title"
      content="Pomodoro Timer - Focus & Productivity Tool | iowidgets"
    />
    <meta
      property="og:description"
      content="Free Pomodoro timer with customizable work and break intervals, session tracking, and notifications. Boost productivity with the proven Pomodoro Technique."
    />
    <meta
      property="og:image"
      content="https://iowidgets.com/assets/pomodoro-preview.png"
    />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:url"
      content="https://iowidgets.com/widgets/pomodoro.html"
    />
    <meta
      name="twitter:title"
      content="Pomodoro Timer - Focus & Productivity Tool | iowidgets"
    />
    <meta
      name="twitter:description"
      content="Free Pomodoro timer with customizable work and break intervals, session tracking, and notifications. Boost productivity with the proven Pomodoro Technique."
    />
    <meta
      name="twitter:image"
      content="https://iowidgets.com/assets/pomodoro-preview.png"
    />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://iowidgets.com/widgets/pomodoro.html" />

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Pomodoro Timer",
        "description": "Free Pomodoro timer with customizable work and break intervals, session tracking, and notifications. Boost productivity with the proven Pomodoro Technique.",
        "url": "https://iowidgets.com/widgets/pomodoro.html",
        "applicationCategory": "ProductivityApplication",
        "operatingSystem": "Any",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "featureList": [
          "25-minute focus sessions",
          "5-minute short breaks",
          "15-minute long breaks",
          "Session tracking",
          "Browser notifications",
          "Customizable durations",
          "Auto-start next timer",
          "Productivity statistics"
        ]
      }
    </script>

    <style>
      :root {
        --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --work-color: #667eea;
        --short-break-color: #10b981;
        --long-break-color: #3b82f6;
        --glass-bg: rgba(255, 255, 255, 0.95);
        --glass-border: rgba(255, 255, 255, 0.3);
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
        --shadow-md: 0 4px 15px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.2);
        --shadow-xl: 0 20px 60px rgba(0, 0, 0, 0.3);
        --text-primary: #1a202c;
        --text-secondary: #4a5568;
        --text-muted: #718096;
        --border-color: #e2e8f0;
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: var(--primary-gradient);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        line-height: 1.6;
        transition: background 0.5s ease;
      }

      body.work-mode {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      body.short-break-mode {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      }

      body.long-break-mode {
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      }

      .container {
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: clamp(2rem, 5vw, 3rem);
        box-shadow: var(--shadow-xl);
        text-align: center;
        max-width: 600px;
        width: 100%;
        border: 1px solid var(--glass-border);
      }

      h1 {
        font-size: clamp(1.5rem, 4vw, 2rem);
        margin-bottom: 0.5rem;
        color: var(--text-primary);
        font-weight: 700;
      }

      .mode {
        font-size: clamp(0.875rem, 2vw, 1rem);
        color: var(--text-secondary);
        margin-bottom: clamp(1.5rem, 3vw, 2rem);
        font-weight: 600;
      }

      .timer-circle {
        width: clamp(200px, 50vw, 300px);
        height: clamp(200px, 50vw, 300px);
        margin: 0 auto clamp(1.5rem, 4vw, 2rem);
        position: relative;
      }

      .progress-ring {
        transform: rotate(-90deg);
      }

      .progress-ring-circle {
        transition: stroke-dashoffset 0.5s ease;
        stroke: var(--work-color);
        fill: transparent;
      }

      .timer-display {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: clamp(3rem, 10vw, 4rem);
        font-weight: 700;
        color: var(--text-primary);
        font-variant-numeric: tabular-nums;
      }

      .controls {
        display: flex;
        gap: clamp(0.75rem, 2vw, 1rem);
        justify-content: center;
        margin-bottom: clamp(1.5rem, 3vw, 2rem);
        flex-wrap: wrap;
      }

      button {
        padding: clamp(0.875rem, 2vw, 1rem) clamp(1.5rem, 3vw, 2rem);
        border: none;
        border-radius: 12px;
        font-size: clamp(0.875rem, 2vw, 1rem);
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
        min-height: 44px;
        min-width: 100px;
      }

      .primary-btn {
        background: var(--work-color);
        color: white;
      }

      .primary-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
      }

      .primary-btn:active {
        transform: translateY(0);
      }

      .secondary-btn {
        background: white;
        color: var(--text-primary);
        border: 2px solid var(--border-color);
      }

      .secondary-btn:hover {
        border-color: var(--work-color);
        color: var(--work-color);
        transform: translateY(-2px);
      }

      .mode-switches {
        display: flex;
        gap: clamp(0.5rem, 1.5vw, 0.75rem);
        justify-content: center;
        margin-bottom: clamp(1rem, 2vw, 1.5rem);
        flex-wrap: wrap;
      }

      .mode-btn {
        padding: 0.625rem 1rem;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        background: white;
        color: var(--text-secondary);
        font-size: clamp(0.75rem, 1.8vw, 0.875rem);
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
        min-height: 44px;
      }

      .mode-btn:hover {
        transform: translateY(-2px);
      }

      .mode-btn.active {
        background: var(--work-color);
        color: white;
        border-color: var(--work-color);
      }

      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 1rem;
        margin-top: clamp(1rem, 2vw, 1.5rem);
        padding-top: clamp(1rem, 2vw, 1.5rem);
        border-top: 2px solid var(--border-color);
      }

      .stat-item {
        text-align: center;
      }

      .stat-value {
        font-size: clamp(1.5rem, 4vw, 2rem);
        font-weight: 700;
        color: var(--work-color);
      }

      .stat-label {
        font-size: clamp(0.75rem, 1.8vw, 0.875rem);
        color: var(--text-muted);
        margin-top: 0.25rem;
      }

      .settings {
        margin-top: clamp(1rem, 2vw, 1.5rem);
        padding: 1rem;
        background: #f8f9fa;
        border-radius: 12px;
        border: 1px solid var(--border-color);
      }

      .settings[open] {
        padding-bottom: 1.25rem;
      }

      .settings-title {
        font-weight: 600;
        margin-bottom: 0.75rem;
        color: var(--text-secondary);
        font-size: clamp(0.875rem, 2vw, 0.95rem);
        cursor: pointer;
        list-style: none;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem;
        border-radius: 8px;
        transition: var(--transition);
      }

      .settings-title:hover {
        background: rgba(102, 126, 234, 0.1);
      }

      .settings-title::marker {
        display: none;
      }

      .settings-title::-webkit-details-marker {
        display: none;
      }

      .setting-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 0;
        gap: 1rem;
        flex-wrap: wrap;
      }

      .setting-label {
        font-size: clamp(0.8rem, 1.8vw, 0.875rem);
        color: var(--text-secondary);
      }

      .setting-control {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .setting-input {
        width: 60px;
        padding: 0.5rem;
        border: 2px solid var(--border-color);
        border-radius: 6px;
        text-align: center;
        font-size: 0.875rem;
        transition: var(--transition);
      }

      .setting-input:focus {
        outline: none;
        border-color: var(--work-color);
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .checkbox-wrapper {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      input[type="checkbox"] {
        width: 20px;
        height: 20px;
        cursor: pointer;
        accent-color: var(--work-color);
      }

      @media (max-width: 640px) {
        body {
          padding: 0.5rem;
          align-items: flex-start;
          padding-top: 2rem;
        }

        .container {
          border-radius: 16px;
        }

        .controls {
          flex-direction: column;
          width: 100%;
        }

        button {
          width: 100%;
        }

        .mode-switches {
          flex-direction: column;
        }

        .mode-btn {
          width: 100%;
        }
      }

      @media (min-width: 641px) and (max-width: 1024px) {
        .container {
          max-width: 550px;
        }
      }

      @media (min-width: 1025px) {
        .container {
          max-width: 600px;
        }

        button:hover {
          box-shadow: var(--shadow-md);
        }
      }
    </style>
  </head>
  <body class="work-mode">
    <div class="container">
      <header>
        <h1>Pomodoro Timer</h1>
        <p class="mode" id="modeText" aria-live="polite">Focus Time</p>
      </header>

      <main>
        <div class="timer-circle">
          <svg
            class="progress-ring"
            width="100%"
            height="100%"
            viewBox="0 0 200 200"
          >
            <circle
              class="progress-ring-circle"
              stroke-width="8"
              fill="transparent"
              r="90"
              cx="100"
              cy="100"
              stroke-dasharray="565.48"
              stroke-dashoffset="0"
            />
          </svg>
          <div
            class="timer-display"
            id="timer"
            aria-live="polite"
            aria-atomic="true"
          >
            25:00
          </div>
        </div>

        <div class="controls" role="group" aria-label="Timer controls">
          <button
            class="primary-btn"
            id="startBtn"
            onclick="toggleTimer()"
            aria-label="Start timer"
          >
            Start
          </button>
          <button
            class="secondary-btn"
            onclick="resetTimer()"
            aria-label="Reset timer"
          >
            Reset
          </button>
        </div>

        <div class="mode-switches" role="group" aria-label="Timer modes">
          <button
            class="mode-btn active"
            onclick="setMode('work')"
            data-mode="work"
            aria-pressed="true"
          >
            Focus (1)
          </button>
          <button
            class="mode-btn"
            onclick="setMode('short')"
            data-mode="short"
            aria-pressed="false"
          >
            Short Break (2)
          </button>
          <button
            class="mode-btn"
            onclick="setMode('long')"
            data-mode="long"
            aria-pressed="false"
          >
            Long Break (3)
          </button>
        </div>

        <div class="stats">
          <div class="stat-item">
            <div class="stat-value" id="sessions">0</div>
            <div class="stat-label">Sessions Today</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="totalTime">0h</div>
            <div class="stat-label">Total Focus Time</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="streakCount">0</div>
            <div class="stat-label">Current Streak</div>
          </div>
        </div>

        <details class="settings">
          <summary class="settings-title">⚙️ Settings</summary>

          <div class="setting-item">
            <label for="work-duration" class="setting-label"
              >Work Duration (min)</label
            >
            <div class="setting-control">
              <input
                type="number"
                id="work-duration"
                class="setting-input"
                min="1"
                max="60"
                value="25"
                onchange="updateDurations()"
                aria-label="Work duration in minutes"
              />
            </div>
          </div>

          <div class="setting-item">
            <label for="short-duration" class="setting-label"
              >Short Break (min)</label
            >
            <div class="setting-control">
              <input
                type="number"
                id="short-duration"
                class="setting-input"
                min="1"
                max="30"
                value="5"
                onchange="updateDurations()"
                aria-label="Short break duration in minutes"
              />
            </div>
          </div>

          <div class="setting-item">
            <label for="long-duration" class="setting-label"
              >Long Break (min)</label
            >
            <div class="setting-control">
              <input
                type="number"
                id="long-duration"
                class="setting-input"
                min="1"
                max="60"
                value="15"
                onchange="updateDurations()"
                aria-label="Long break duration in minutes"
              />
            </div>
          </div>

          <div class="setting-item">
            <label for="auto-start" class="setting-label"
              >Auto-start next timer</label
            >
            <div class="setting-control checkbox-wrapper">
              <input
                type="checkbox"
                id="auto-start"
                onchange="saveSettings()"
                aria-label="Automatically start next timer"
              />
            </div>
          </div>

          <div class="setting-item">
            <label for="sound-enabled" class="setting-label"
              >Sound notifications</label
            >
            <div class="setting-control checkbox-wrapper">
              <input
                type="checkbox"
                id="sound-enabled"
                checked
                onchange="saveSettings()"
                aria-label="Enable sound notifications"
              />
            </div>
          </div>
        </details>
      </main>
    </div>
    <script>
      // State management
      let minutes = 25;
      let seconds = 0;
      let isRunning = false;
      let interval;
      let currentMode = "work";
      let totalMinutes = 25;
      let sessions = 0;
      let streak = 0;
      let totalFocusTime = 0;

      const modes = {
        work: {
          time: 25,
          label: "Focus Time",
          color: "#667eea",
          bodyClass: "work-mode",
        },
        short: {
          time: 5,
          label: "Short Break",
          color: "#10b981",
          bodyClass: "short-break-mode",
        },
        long: {
          time: 15,
          label: "Long Break",
          color: "#3b82f6",
          bodyClass: "long-break-mode",
        },
      };

      // SVG circle configuration
      const circle = document.querySelector(".progress-ring-circle");
      const radius = 90;
      const circumference = radius * 2 * Math.PI;
      circle.style.strokeDasharray = `${circumference} ${circumference}`;
      circle.style.strokeDashoffset = 0;

      // Load saved settings on init
      loadSettings();
      loadStats();
      updateProgressRing();

      function setMode(mode) {
        if (isRunning) {
          if (!confirm("Timer is running. Switch mode anyway?")) return;
          clearInterval(interval);
          isRunning = false;
        }

        currentMode = mode;
        minutes = modes[mode].time;
        totalMinutes = minutes;
        seconds = 0;

        // Update UI
        document.getElementById("startBtn").textContent = "Start";
        document.getElementById("modeText").textContent = modes[mode].label;
        circle.style.stroke = modes[mode].color;
        document.querySelector(".primary-btn").style.background =
          modes[mode].color;

        // Update body class for background gradient
        document.body.className = modes[mode].bodyClass;

        // Update mode buttons
        document.querySelectorAll(".mode-btn").forEach((btn) => {
          const isActive = btn.dataset.mode === mode;
          btn.classList.toggle("active", isActive);
          btn.setAttribute("aria-pressed", isActive);
          if (isActive) {
            btn.style.background = modes[mode].color;
            btn.style.borderColor = modes[mode].color;
          } else {
            btn.style.background = "white";
            btn.style.borderColor = "#e2e8f0";
          }
        });

        updateDisplay();
        updateProgressRing();
      }

      function toggleTimer() {
        isRunning = !isRunning;
        const btn = document.getElementById("startBtn");

        if (isRunning) {
          btn.textContent = "Pause";
          btn.setAttribute("aria-label", "Pause timer");

          interval = setInterval(() => {
            if (seconds === 0) {
              if (minutes === 0) {
                timerComplete();
                return;
              }
              minutes--;
              seconds = 59;
            } else {
              seconds--;
            }
            updateDisplay();
            updateProgressRing();
          }, 1000);
        } else {
          btn.textContent = "Start";
          btn.setAttribute("aria-label", "Start timer");
          clearInterval(interval);
        }
      }

      function timerComplete() {
        clearInterval(interval);
        isRunning = false;
        document.getElementById("startBtn").textContent = "Start";

        // Update statistics
        if (currentMode === "work") {
          sessions++;
          streak++;
          totalFocusTime += modes.work.time;
          document.getElementById("sessions").textContent = sessions;
          document.getElementById("streakCount").textContent = streak;
          updateTotalTime();
          saveStats();
        }

        // Play sound if enabled
        if (document.getElementById("sound-enabled").checked) {
          playSound();
        }

        // Show notification
        showNotification();

        // Auto-start next timer if enabled
        if (document.getElementById("auto-start").checked) {
          setTimeout(() => {
            if (currentMode === "work") {
              setMode(sessions % 4 === 0 ? "long" : "short");
            } else {
              setMode("work");
            }
            toggleTimer();
          }, 3000);
        }
      }

      function resetTimer() {
        if (isRunning) {
          if (!confirm("Timer is running. Reset anyway?")) return;
        }

        isRunning = false;
        clearInterval(interval);
        minutes = modes[currentMode].time;
        totalMinutes = minutes;
        seconds = 0;
        updateDisplay();
        updateProgressRing();
        document.getElementById("startBtn").textContent = "Start";
        document
          .getElementById("startBtn")
          .setAttribute("aria-label", "Start timer");
      }

      function updateDisplay() {
        const m = String(minutes).padStart(2, "0");
        const s = String(seconds).padStart(2, "0");
        document.getElementById("timer").textContent = `${m}:${s}`;
        document.title = `${m}:${s} - ${modes[currentMode].label}`;
      }

      function updateProgressRing() {
        const totalSeconds = totalMinutes * 60;
        const currentSeconds = minutes * 60 + seconds;
        const progress = currentSeconds / totalSeconds;
        const offset = circumference - progress * circumference;
        circle.style.strokeDashoffset = offset;
      }

      function updateTotalTime() {
        const hours = Math.floor(totalFocusTime / 60);
        const mins = totalFocusTime % 60;
        const display = hours > 0 ? `${hours}h ${mins}m` : `${mins}m`;
        document.getElementById("totalTime").textContent = display;
      }

      function playSound() {
        // Create audio context for beep sound
        const audioContext = new (window.AudioContext ||
          window.webkitAudioContext)();
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        oscillator.frequency.value = 800;
        oscillator.type = "sine";

        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(
          0.01,
          audioContext.currentTime + 0.5
        );

        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 0.5);
      }

      function showNotification() {
        if ("Notification" in window && Notification.permission === "granted") {
          new Notification("Pomodoro Timer Complete!", {
            body:
              currentMode === "work"
                ? "Great work! Time for a break."
                : "Break's over. Ready to focus?",
            icon: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%23667eea'/></svg>",
          });
        }
      }

      function updateDurations() {
        modes.work.time =
          parseInt(document.getElementById("work-duration").value) || 25;
        modes.short.time =
          parseInt(document.getElementById("short-duration").value) || 5;
        modes.long.time =
          parseInt(document.getElementById("long-duration").value) || 15;

        if (!isRunning) {
          minutes = modes[currentMode].time;
          totalMinutes = minutes;
          seconds = 0;
          updateDisplay();
          updateProgressRing();
        }

        saveSettings();
      }

      function saveSettings() {
        const settings = {
          workDuration: modes.work.time,
          shortDuration: modes.short.time,
          longDuration: modes.long.time,
          autoStart: document.getElementById("auto-start").checked,
          soundEnabled: document.getElementById("sound-enabled").checked,
        };
        localStorage.setItem("pomodoroSettings", JSON.stringify(settings));
      }

      function loadSettings() {
        const saved = localStorage.getItem("pomodoroSettings");
        if (saved) {
          const settings = JSON.parse(saved);
          modes.work.time = settings.workDuration || 25;
          modes.short.time = settings.shortDuration || 5;
          modes.long.time = settings.longDuration || 15;

          document.getElementById("work-duration").value = modes.work.time;
          document.getElementById("short-duration").value = modes.short.time;
          document.getElementById("long-duration").value = modes.long.time;
          document.getElementById("auto-start").checked =
            settings.autoStart || false;
          document.getElementById("sound-enabled").checked =
            settings.soundEnabled !== false;

          minutes = modes[currentMode].time;
          totalMinutes = minutes;
        }
      }

      function saveStats() {
        const today = new Date().toDateString();
        const stats = {
          date: today,
          sessions: sessions,
          streak: streak,
          totalFocusTime: totalFocusTime,
        };
        localStorage.setItem("pomodoroStats", JSON.stringify(stats));
      }

      function loadStats() {
        const saved = localStorage.getItem("pomodoroStats");
        if (saved) {
          const stats = JSON.parse(saved);
          const today = new Date().toDateString();

          if (stats.date === today) {
            sessions = stats.sessions || 0;
            streak = stats.streak || 0;
            totalFocusTime = stats.totalFocusTime || 0;
          } else {
            // New day, reset daily stats but keep streak if it's consecutive
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            if (stats.date !== yesterday.toDateString()) {
              streak = 0;
            }
            sessions = 0;
            totalFocusTime = 0;
          }

          document.getElementById("sessions").textContent = sessions;
          document.getElementById("streakCount").textContent = streak;
          updateTotalTime();
        }
      }

      // Keyboard shortcuts
      document.addEventListener("keydown", (e) => {
        // Space: Start/Pause
        if (e.code === "Space" && e.target.tagName !== "INPUT") {
          e.preventDefault();
          toggleTimer();
        }
        // R: Reset
        if (e.key === "r" || e.key === "R") {
          if (e.target.tagName !== "INPUT") {
            resetTimer();
          }
        }
        // 1, 2, 3: Switch modes
        if (e.key === "1") setMode("work");
        if (e.key === "2") setMode("short");
        if (e.key === "3") setMode("long");
      });

      // Request notification permission
      if ("Notification" in window && Notification.permission === "default") {
        Notification.requestPermission();
      }

      // Initialize display
      updateDisplay();
    </script>
  </body>
</html>
