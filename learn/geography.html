<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Geography Quiz - MiniApps</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-primary: #fafbff;
        --bg-secondary: #f0f4ff;
        --bg-card: #ffffff;
        --bg-nav: rgba(255, 255, 255, 0.9);
        --text-primary: #1e293b;
        --text-secondary: #64748b;
        --text-muted: #94a3b8;
        --border-color: rgba(0, 0, 0, 0.08);
        --border-light: #e2e8f0;
        --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);
        --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      [data-theme="dark"] {
        --bg-primary: #0f0f1a;
        --bg-secondary: #1a1a2e;
        --bg-card: rgba(255, 255, 255, 0.03);
        --bg-nav: rgba(15, 15, 26, 0.9);
        --text-primary: #ffffff;
        --text-secondary: rgba(255, 255, 255, 0.7);
        --text-muted: rgba(255, 255, 255, 0.5);
        --border-color: rgba(255, 255, 255, 0.08);
        --border-light: rgba(255, 255, 255, 0.1);
        --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family:
          "Inter",
          -apple-system,
          BlinkMacSystemFont,
          sans-serif;
      }
      body {
        background: var(--bg-primary);
        color: var(--text-primary);
        min-height: 100vh;
        transition:
          background 0.3s ease,
          color 0.3s ease;
      }
      .container {
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 1.5rem;
      }

      /* Navigation */
      .nav {
        position: sticky;
        top: 0;
        z-index: 1000;
        padding: 0.875rem 0;
        background: var(--bg-nav);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-bottom: 1px solid var(--border-color);
      }
      .nav-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 1.5rem;
      }
      .logo {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        text-decoration: none;
      }
      .logo-icon {
        width: 44px;
        height: 44px;
        background: var(--gradient-primary);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
      }
      .logo-text {
        font-size: 1.5rem;
        font-weight: 800;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .main-nav {
        display: flex;
        align-items: center;
        gap: 0.25rem;
      }
      .main-nav-link {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.625rem 1.25rem;
        border-radius: 12px;
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--text-secondary);
        text-decoration: none;
        transition: all 0.2s ease;
      }
      .main-nav-link:hover {
        color: #6366f1;
        background: rgba(99, 102, 241, 0.1);
      }
      .main-nav-link.active {
        background: var(--gradient-primary);
        color: white;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
      }
      .main-nav-link .nav-icon {
        font-size: 1.1rem;
      }
      .nav-right {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }
      .nav-link {
        text-decoration: none;
        color: var(--text-secondary);
        font-weight: 500;
        padding: 0.5rem 1rem;
        border-radius: 10px;
        transition: all 0.2s ease;
      }
      .nav-link:hover {
        color: #6366f1;
        background: rgba(99, 102, 241, 0.1);
      }
      .theme-toggle {
        width: 44px;
        height: 44px;
        border-radius: 12px;
        border: 2px solid var(--border-light);
        background: var(--bg-card);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
        transition: all 0.3s ease;
        color: var(--text-primary);
      }
      .theme-toggle:hover {
        border-color: #6366f1;
        transform: rotate(15deg);
      }
      .theme-toggle .sun-icon {
        display: block;
      }
      .theme-toggle .moon-icon {
        display: none;
      }
      [data-theme="dark"] .theme-toggle .sun-icon {
        display: none;
      }
      [data-theme="dark"] .theme-toggle .moon-icon {
        display: block;
      }

      @media (max-width: 768px) {
        .main-nav,
        .nav-right .nav-link {
          display: none;
        }
      }

      .geo-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem;
      }

      .back-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--primary);
        text-decoration: none;
        margin-bottom: 2rem;
        font-weight: 500;
      }

      .geo-header {
        text-align: center;
        margin-bottom: 2rem;
      }

      .geo-header h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
      }

      .mode-selector {
        display: flex;
        justify-content: center;
        gap: 0.5rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }

      .mode-btn {
        padding: 0.75rem 1.25rem;
        border: 2px solid var(--border);
        background: var(--bg);
        border-radius: 10px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .mode-btn:hover {
        border-color: var(--primary);
      }

      .mode-btn.active {
        background: var(--primary);
        border-color: var(--primary);
        color: white;
      }

      .stats-bar {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }

      .stat-item {
        background: var(--bg-light);
        padding: 1rem 1.5rem;
        border-radius: 12px;
        text-align: center;
        min-width: 100px;
      }

      .stat-value {
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--primary);
      }

      .stat-label {
        font-size: 0.85rem;
        color: var(--text-light);
      }

      .question-card {
        background: var(--bg);
        border: 2px solid var(--border);
        border-radius: 20px;
        padding: 2rem;
        text-align: center;
        margin-bottom: 2rem;
      }

      .question-number {
        font-size: 0.9rem;
        color: var(--text-light);
        margin-bottom: 0.5rem;
      }

      .flag-display {
        font-size: 8rem;
        margin-bottom: 1rem;
        line-height: 1;
      }

      .question-text {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
      }

      .options-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        max-width: 500px;
        margin: 0 auto;
      }

      @media (max-width: 500px) {
        .options-grid {
          grid-template-columns: 1fr;
        }
      }

      .option-btn {
        padding: 1rem;
        border: 2px solid var(--border);
        background: var(--bg);
        border-radius: 10px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .option-btn:hover:not(:disabled) {
        border-color: var(--primary);
        transform: translateY(-2px);
      }

      .option-btn.correct {
        background: #dcfce7;
        border-color: #22c55e;
        color: #16a34a;
      }

      .option-btn.incorrect {
        background: #fee2e2;
        border-color: #ef4444;
        color: #dc2626;
      }

      .option-btn:disabled {
        cursor: not-allowed;
        opacity: 0.7;
      }

      .feedback {
        margin-top: 1.5rem;
        padding: 1rem;
        border-radius: 8px;
        font-weight: 600;
        display: none;
      }

      .feedback.correct {
        display: block;
        background: #dcfce7;
        color: #16a34a;
      }

      .feedback.incorrect {
        display: block;
        background: #fee2e2;
        color: #dc2626;
      }

      .controls {
        display: flex;
        justify-content: center;
        gap: 1rem;
      }

      .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn-primary {
        background: var(--primary);
        color: white;
      }

      .btn-primary:hover {
        background: #1d4ed8;
      }

      .btn-secondary {
        background: var(--bg-light);
        color: var(--text);
        border: 1px solid var(--border);
      }

      .progress-bar {
        height: 8px;
        background: var(--bg-light);
        border-radius: 4px;
        margin-bottom: 2rem;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #3b82f6, #8b5cf6);
        transition: width 0.3s ease;
      }

      .results-card {
        display: none;
        background: linear-gradient(135deg, #eff6ff, #dbeafe);
        border-radius: 20px;
        padding: 3rem;
        text-align: center;
      }

      .results-card.show {
        display: block;
      }

      .results-score {
        font-size: 4rem;
        font-weight: 800;
        color: var(--primary);
        margin-bottom: 1rem;
      }

      .results-message {
        font-size: 1.5rem;
        margin-bottom: 2rem;
      }

      .streak-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        background: linear-gradient(135deg, #f59e0b, #d97706);
        color: white;
        border-radius: 20px;
        font-weight: 600;
        margin-bottom: 1rem;
      }
    </style>
  </head>
  <body>
    <nav class="nav">
      <div class="nav-content">
        <a href="../index.html" class="logo">
          <div class="logo-icon">‚ö°</div>
          <span class="logo-text">MiniApps</span>
        </a>
        <div class="main-nav">
          <a href="../tools.html" class="main-nav-link">
            <span class="nav-icon">üõ†Ô∏è</span>
            <span>Tools</span>
          </a>
          <a href="../games.html" class="main-nav-link">
            <span class="nav-icon">üéÆ</span>
            <span>Games</span>
          </a>
          <a href="../learn.html" class="main-nav-link active">
            <span class="nav-icon">üìö</span>
            <span>Learn</span>
          </a>
        </div>
        <div class="nav-right">
          <a href="../about.html" class="nav-link">About</a>
          <a href="../contact.html" class="nav-link">Contact</a>
          <button
            class="theme-toggle"
            onclick="toggleTheme()"
            aria-label="Toggle theme"
          >
            <span class="sun-icon">üåô</span>
            <span class="moon-icon">‚òÄÔ∏è</span>
          </button>
        </div>
      </div>
    </nav>

    <div class="geo-container">
      <div class="geo-header">
        <h1>üó∫Ô∏è Geography Quiz</h1>
        <p style="color: var(--text-light)">
          Test your knowledge of countries, capitals, and flags
        </p>
      </div>

      <div class="mode-selector">
        <button class="mode-btn active" onclick="setMode('flags')">
          üè≥Ô∏è Flags
        </button>
        <button class="mode-btn" onclick="setMode('capitals')">
          üèõÔ∏è Capitals
        </button>
        <button class="mode-btn" onclick="setMode('countries')">
          üåç Countries
        </button>
      </div>

      <div class="stats-bar">
        <div class="stat-item">
          <div class="stat-value" id="score">0</div>
          <div class="stat-label">Score</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="streak">0</div>
          <div class="stat-label">Streak üî•</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="best">0</div>
          <div class="stat-label">Best</div>
        </div>
      </div>

      <div class="progress-bar">
        <div class="progress-fill" id="progress" style="width: 0%"></div>
      </div>

      <div class="question-card" id="questionCard">
        <div class="question-number" id="questionNumber">Question 1 of 10</div>
        <div class="flag-display" id="flagDisplay">üá´üá∑</div>
        <div class="question-text" id="questionText">
          Which country does this flag belong to?
        </div>
        <div class="options-grid" id="optionsGrid"></div>
        <div class="feedback" id="feedback"></div>
      </div>

      <div class="results-card" id="resultsCard">
        <div class="results-score" id="finalScore">8/10</div>
        <div class="results-message" id="resultsMessage">Great job!</div>
        <div class="streak-badge" id="streakBadge" style="display: none">
          üî• Best Streak: <span id="bestStreak">5</span>
        </div>
        <button
          class="btn btn-primary"
          onclick="startQuiz()"
          style="margin-top: 1rem"
        >
          Play Again
        </button>
      </div>

      <div class="controls">
        <button
          class="btn btn-primary"
          onclick="nextQuestion()"
          id="nextBtn"
          style="display: none"
        >
          Next Question ‚Üí
        </button>
        <button class="btn btn-secondary" onclick="startQuiz()">
          üîÑ New Quiz
        </button>
      </div>
    </div>

    <script>
      const countries = [
        { name: "France", capital: "Paris", flag: "üá´üá∑", continent: "Europe" },
        { name: "Japan", capital: "Tokyo", flag: "üáØüáµ", continent: "Asia" },
        {
          name: "Brazil",
          capital: "Bras√≠lia",
          flag: "üáßüá∑",
          continent: "South America",
        },
        {
          name: "Canada",
          capital: "Ottawa",
          flag: "üá®üá¶",
          continent: "North America",
        },
        {
          name: "Australia",
          capital: "Canberra",
          flag: "üá¶üá∫",
          continent: "Oceania",
        },
        { name: "Germany", capital: "Berlin", flag: "üá©üá™", continent: "Europe" },
        { name: "Italy", capital: "Rome", flag: "üáÆüáπ", continent: "Europe" },
        { name: "Spain", capital: "Madrid", flag: "üá™üá∏", continent: "Europe" },
        {
          name: "United Kingdom",
          capital: "London",
          flag: "üá¨üáß",
          continent: "Europe",
        },
        {
          name: "United States",
          capital: "Washington D.C.",
          flag: "üá∫üá∏",
          continent: "North America",
        },
        { name: "China", capital: "Beijing", flag: "üá®üá≥", continent: "Asia" },
        { name: "India", capital: "New Delhi", flag: "üáÆüá≥", continent: "Asia" },
        {
          name: "Russia",
          capital: "Moscow",
          flag: "üá∑üá∫",
          continent: "Europe/Asia",
        },
        {
          name: "Mexico",
          capital: "Mexico City",
          flag: "üá≤üáΩ",
          continent: "North America",
        },
        {
          name: "South Korea",
          capital: "Seoul",
          flag: "üá∞üá∑",
          continent: "Asia",
        },
        {
          name: "Argentina",
          capital: "Buenos Aires",
          flag: "üá¶üá∑",
          continent: "South America",
        },
        { name: "Egypt", capital: "Cairo", flag: "üá™üá¨", continent: "Africa" },
        {
          name: "South Africa",
          capital: "Pretoria",
          flag: "üáøüá¶",
          continent: "Africa",
        },
        {
          name: "Turkey",
          capital: "Ankara",
          flag: "üáπüá∑",
          continent: "Europe/Asia",
        },
        { name: "Thailand", capital: "Bangkok", flag: "üáπüá≠", continent: "Asia" },
        {
          name: "Netherlands",
          capital: "Amsterdam",
          flag: "üá≥üá±",
          continent: "Europe",
        },
        {
          name: "Sweden",
          capital: "Stockholm",
          flag: "üá∏üá™",
          continent: "Europe",
        },
        { name: "Norway", capital: "Oslo", flag: "üá≥üá¥", continent: "Europe" },
        { name: "Poland", capital: "Warsaw", flag: "üáµüá±", continent: "Europe" },
        { name: "Greece", capital: "Athens", flag: "üá¨üá∑", continent: "Europe" },
        {
          name: "Portugal",
          capital: "Lisbon",
          flag: "üáµüáπ",
          continent: "Europe",
        },
        { name: "Ireland", capital: "Dublin", flag: "üáÆüá™", continent: "Europe" },
        {
          name: "Switzerland",
          capital: "Bern",
          flag: "üá®üá≠",
          continent: "Europe",
        },
        {
          name: "Belgium",
          capital: "Brussels",
          flag: "üáßüá™",
          continent: "Europe",
        },
        { name: "Austria", capital: "Vienna", flag: "üá¶üáπ", continent: "Europe" },
      ];

      let currentMode = "flags";
      let currentQuestion = 0;
      let score = 0;
      let streak = 0;
      let bestStreak = parseInt(localStorage.getItem("geoBestStreak")) || 0;
      let questions = [];
      let answered = false;

      function setMode(mode) {
        currentMode = mode;
        document
          .querySelectorAll(".mode-btn")
          .forEach((btn) => btn.classList.remove("active"));
        event.target.classList.add("active");
        startQuiz();
      }

      function startQuiz() {
        currentQuestion = 0;
        score = 0;
        streak = 0;
        answered = false;

        document.getElementById("score").textContent = "0";
        document.getElementById("streak").textContent = "0";
        document.getElementById("best").textContent = bestStreak;
        document.getElementById("questionCard").style.display = "block";
        document.getElementById("resultsCard").classList.remove("show");
        document.getElementById("nextBtn").style.display = "none";

        // Generate 10 random questions
        questions = [...countries].sort(() => Math.random() - 0.5).slice(0, 10);
        showQuestion();
      }

      function showQuestion() {
        const q = questions[currentQuestion];
        answered = false;

        document.getElementById("questionNumber").textContent =
          `Question ${currentQuestion + 1} of 10`;
        document.getElementById("progress").style.width =
          `${(currentQuestion / 10) * 100}%`;
        document.getElementById("feedback").className = "feedback";
        document.getElementById("nextBtn").style.display = "none";

        const flagDisplay = document.getElementById("flagDisplay");
        const questionText = document.getElementById("questionText");

        if (currentMode === "flags") {
          flagDisplay.textContent = q.flag;
          flagDisplay.style.display = "block";
          questionText.textContent = "Which country does this flag belong to?";
          generateOptions(
            q.name,
            countries.map((c) => c.name),
          );
        } else if (currentMode === "capitals") {
          flagDisplay.style.display = "none";
          questionText.textContent = `What is the capital of ${q.name}?`;
          generateOptions(
            q.capital,
            countries.map((c) => c.capital),
          );
        } else if (currentMode === "countries") {
          flagDisplay.style.display = "none";
          questionText.textContent = `${q.capital} is the capital of which country?`;
          generateOptions(
            q.name,
            countries.map((c) => c.name),
          );
        }
      }

      function generateOptions(correct, allOptions) {
        const wrong = allOptions
          .filter((o) => o !== correct)
          .sort(() => Math.random() - 0.5)
          .slice(0, 3);
        const options = [...wrong, correct].sort(() => Math.random() - 0.5);

        const grid = document.getElementById("optionsGrid");
        grid.innerHTML = options
          .map(
            (opt) =>
              `<button class="option-btn" onclick="checkAnswer('${opt}', '${correct}')">${opt}</button>`,
          )
          .join("");
      }

      function checkAnswer(selected, correct) {
        if (answered) return;
        answered = true;

        const buttons = document.querySelectorAll(".option-btn");
        buttons.forEach((btn) => {
          btn.disabled = true;
          if (btn.textContent === correct) {
            btn.classList.add("correct");
          } else if (btn.textContent === selected && selected !== correct) {
            btn.classList.add("incorrect");
          }
        });

        const feedback = document.getElementById("feedback");

        if (selected === correct) {
          score++;
          streak++;
          if (streak > bestStreak) {
            bestStreak = streak;
            localStorage.setItem("geoBestStreak", bestStreak);
          }
          feedback.textContent = "‚úì Correct!";
          feedback.className = "feedback correct";
        } else {
          streak = 0;
          feedback.textContent = `‚úó The answer was ${correct}`;
          feedback.className = "feedback incorrect";
        }

        document.getElementById("score").textContent = score;
        document.getElementById("streak").textContent = streak;
        document.getElementById("best").textContent = bestStreak;
        document.getElementById("nextBtn").style.display = "block";

        if (currentQuestion === 9) {
          document.getElementById("nextBtn").textContent = "See Results";
        }
      }

      function nextQuestion() {
        currentQuestion++;

        if (currentQuestion >= 10) {
          showResults();
        } else {
          showQuestion();
        }
      }

      function showResults() {
        document.getElementById("questionCard").style.display = "none";
        document.getElementById("resultsCard").classList.add("show");
        document.getElementById("progress").style.width = "100%";
        document.getElementById("nextBtn").style.display = "none";

        document.getElementById("finalScore").textContent = `${score}/10`;

        let message;
        if (score === 10) {
          message = "üèÜ Perfect! You're a geography genius!";
        } else if (score >= 8) {
          message = "üåü Excellent! Great knowledge!";
        } else if (score >= 6) {
          message = "üëç Good job! Keep learning!";
        } else if (score >= 4) {
          message = "üìö Not bad! Practice makes perfect!";
        } else {
          message = "üåç Keep exploring the world!";
        }
        document.getElementById("resultsMessage").textContent = message;

        if (bestStreak > 0) {
          document.getElementById("streakBadge").style.display = "inline-flex";
          document.getElementById("bestStreak").textContent = bestStreak;
        }
      }

      // Initialize
      document.getElementById("best").textContent = bestStreak;
      startQuiz();
    </script>

    <footer
      style="
        padding: 2rem 0;
        border-top: 1px solid var(--border-color);
        margin-top: 3rem;
        text-align: center;
      "
    >
      <p style="color: var(--text-muted)">¬© 2026 MiniApps. Made with ‚ù§Ô∏è</p>
    </footer>

    <script>
      function getPreferredTheme() {
        const saved = localStorage.getItem("miniapps-theme");
        if (saved) return saved;
        return window.matchMedia("(prefers-color-scheme: dark)").matches
          ? "dark"
          : "light";
      }
      function setTheme(theme) {
        document.documentElement.setAttribute("data-theme", theme);
        localStorage.setItem("miniapps-theme", theme);
      }
      function toggleTheme() {
        const current =
          document.documentElement.getAttribute("data-theme") || "light";
        setTheme(current === "dark" ? "light" : "dark");
      }
      setTheme(getPreferredTheme());
    </script>
  </body>
</html>
